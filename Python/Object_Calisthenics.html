<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Object Calisthenics</title><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; font-size-adjust: none; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
  .typora-export h1::after, .typora-export h2::after, .typora-export h3::after, .typora-export h4::after, .typora-export h5::after, .typora-export h6::after { content: ""; display: block; height: 100px; margin-bottom: -100px; }
}


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Georgia,Palatino, serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #FCF5ED;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: 500;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-weight: 300;
  text-align: center;
  font-size: 28px;
  color: #933D3F;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #AE3737;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #F4ECE3;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-top: 1px dotted #CDC7BC;
  border-bottom: 1px dotted #CDC7BC;
  padding: 0 15px;
  background-color: #F8EDDA;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
<style type="text/css">
.highlight  { background: #ffffff; }
.highlight .c { color: #999988; font-style: italic } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { font-weight: bold } /* Keyword */
.highlight .o { font-weight: bold } /* Operator */
.highlight .cm { color: #999988; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #999999; font-weight: bold } /* Comment.Preproc */
.highlight .c1 { color: #999988; font-style: italic } /* Comment.Single */
.highlight .cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .gd .x { color: #000000; background-color: #ffaaaa } /* Generic.Deleted.Specific */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #999999 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .gi .x { color: #000000; background-color: #aaffaa } /* Generic.Inserted.Specific */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #aaaaaa } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { font-weight: bold } /* Keyword.Constant */
.highlight .kd { font-weight: bold } /* Keyword.Declaration */
.highlight .kp { font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #445588; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #009999 } /* Literal.Number */
.highlight .s { color: #d14 } /* Literal.String */
.highlight .na { color: #008080 } /* Name.Attribute */
.highlight .nb { color: #0086B3 } /* Name.Builtin */
.highlight .nc { color: #445588; font-weight: bold } /* Name.Class */
.highlight .no { color: #008080 } /* Name.Constant */
.highlight .ni { color: #800080 } /* Name.Entity */
.highlight .ne { color: #990000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #990000; font-weight: bold } /* Name.Function */
.highlight .nn { color: #555555 } /* Name.Namespace */
.highlight .nt { color: #000080 } /* Name.Tag */
.highlight .nv { color: #008080 } /* Name.Variable */
.highlight .ow { font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #009999 } /* Literal.Number.Float */
.highlight .mh { color: #009999 } /* Literal.Number.Hex */
.highlight .mi { color: #009999 } /* Literal.Number.Integer */
.highlight .mo { color: #009999 } /* Literal.Number.Oct */
.highlight .sb { color: #d14 } /* Literal.String.Backtick */
.highlight .sc { color: #d14 } /* Literal.String.Char */
.highlight .sd { color: #d14 } /* Literal.String.Doc */
.highlight .s2 { color: #d14 } /* Literal.String.Double */
.highlight .se { color: #d14 } /* Literal.String.Escape */
.highlight .sh { color: #d14 } /* Literal.String.Heredoc */
.highlight .si { color: #d14 } /* Literal.String.Interpol */
.highlight .sx { color: #d14 } /* Literal.String.Other */
.highlight .sr { color: #009926 } /* Literal.String.Regex */
.highlight .s1 { color: #d14 } /* Literal.String.Single */
.highlight .ss { color: #990073 } /* Literal.String.Symbol */
.highlight .bp { color: #999999 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #008080 } /* Name.Variable.Class */
.highlight .vg { color: #008080 } /* Name.Variable.Global */
.highlight .vi { color: #008080 } /* Name.Variable.Instance */
.highlight .il { color: #009999 } /* Literal.Number.Integer.Long */
.pl-c {
    color: #969896;
}

.pl-c1,.pl-mdh,.pl-mm,.pl-mp,.pl-mr,.pl-s1 .pl-v,.pl-s3,.pl-sc,.pl-sv {
    color: #0086b3;
}

.pl-e,.pl-en {
    color: #795da3;
}

.pl-s1 .pl-s2,.pl-smi,.pl-smp,.pl-stj,.pl-vo,.pl-vpf {
    color: #333;
}

.pl-ent {
    color: #63a35c;
}

.pl-k,.pl-s,.pl-st {
    color: #a71d5d;
}

.pl-pds,.pl-s1,.pl-s1 .pl-pse .pl-s2,.pl-sr,.pl-sr .pl-cce,.pl-sr .pl-sra,.pl-sr .pl-sre,.pl-src,.pl-v {
    color: #df5000;
}

.pl-id {
    color: #b52a1d;
}

.pl-ii {
    background-color: #b52a1d;
    color: #f8f8f8;
}

.pl-sr .pl-cce {
    color: #63a35c;
    font-weight: bold;
}

.pl-ml {
    color: #693a17;
}

.pl-mh,.pl-mh .pl-en,.pl-ms {
    color: #1d3e81;
    font-weight: bold;
}

.pl-mq {
    color: #008080;
}

.pl-mi {
    color: #333;
    font-style: italic;
}

.pl-mb {
    color: #333;
    font-weight: bold;
}

.pl-md,.pl-mdhf {
    background-color: #ffecec;
    color: #bd2c00;
}

.pl-mdht,.pl-mi1 {
    background-color: #eaffea;
    color: #55a532;
}

.pl-mdr {
    color: #795da3;
    font-weight: bold;
}

.pl-mo {
    color: #1d3e81;
}
.task-list {
padding-left:10px;
margin-bottom:0;
}

.task-list li {
    margin-left: 20px;
}

.task-list-item {
list-style-type:none;
padding-left:10px;
}

.task-list-item label {
font-weight:400;
}

.task-list-item.enabled label {
cursor:pointer;
}

.task-list-item+.task-list-item {
margin-top:3px;
}

.task-list-item-checkbox {
display:inline-block;
margin-left:-20px;
margin-right:3px;
vertical-align:1px;
}



</style>
</head>
<body class='typora-export'>
<div id='write'  class=''><h1><a name="object-calisthenics" class="md-header-anchor"></a><span>Object Calisthenics</span></h1><p><a href='https://on.soundcloud.com/jytPymKPFTvJsjkTA'><span>🎶</span></a></p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n943"><a class="md-toc-inner" href="#object-calisthenics">Object Calisthenics</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n947"><a class="md-toc-inner" href="#definição">Definição</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n949"><a class="md-toc-inner" href="#as-9-regras-do-object-calisthenics">As <strong>9 regras do Object Calisthenics</strong>:</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1014"><a class="md-toc-inner" href="#objetivo">Objetivo:  </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1023"><a class="md-toc-inner" href="#quando-usar"><strong>Quando usar?</strong></a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1032"><a class="md-toc-inner" href="#videos-youtube">Videos YouTube</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1040"><a class="md-toc-inner" href="#referências"><strong>Referências</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1042"><a class="md-toc-inner" href="#origem-e-referências-principais">Origem e <strong>Referências Principais</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1063"><a class="md-toc-inner" href="#onde-encontrar">Onde Encontrar?</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1075"><a class="md-toc-inner" href="#comparação-com-outras-metodologias">Comparação com <strong>Outras Metodologias</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1084"><a class="md-toc-inner" href="#referência-primária-origem-do-conceito">Referência Primária (<strong>Origem do Conceito</strong>)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1092"><a class="md-toc-inner" href="#referências-secundárias-influências-e-contexto">Referências Secundárias (<strong>Influências e Contexto</strong>)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1110"><a class="md-toc-inner" href="#observações">Observações</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1119"><a class="md-toc-inner" href="#aplicando-em-python">Aplicando em Python</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1120"><a class="md-toc-inner" href="#1-clean-code--boas-práticas-em-python">1. <strong>Clean Code</strong> &amp; Boas Práticas em Python</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1121"><a class="md-toc-inner" href="#livro-mais-referenciado-clean-code---robert-c-martin">Livro mais referenciado (<strong>Clean Code - Robert C. Martin</strong>)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1133"><a class="md-toc-inner" href="#adaptação-para-python">Adaptação para Python</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1143"><a class="md-toc-inner" href="#livro-específico-para-python">Livro específico para Python</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1154"><a class="md-toc-inner" href="#2-object-calisthenics--design-orientado-a-objetos-em-python">2. <strong>Object Calisthenics</strong> &amp; Design Orientado a Objetos em Python</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1155"><a class="md-toc-inner" href="#origem-do-object-calisthenics">Origem do Object Calisthenics</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1165"><a class="md-toc-inner" href="#aplicação-prática-em-python"><strong>Aplicação Prática</strong> em Python</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1175"><a class="md-toc-inner" href="#livro-avançado-python-oo">Livro Avançado (Python OO)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1186"><a class="md-toc-inner" href="#3-artigos-acadêmicos-complementares">3. <strong>Artigos Acadêmicos</strong> Complementares</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1203"><a class="md-toc-inner" href="#4-outras-referências">4. Outras Referências?</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1212"><a class="md-toc-inner" href="#exemplo">Exemplo</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1215"><a class="md-toc-inner" href="#cenário-validar-acesso-de-usuário">Cenário: Validar acesso de usuário</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1223"><a class="md-toc-inner" href="#versão-inicial-com-else">Versão Inicial (<strong>Com <code>else</code></strong>)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1232"><a class="md-toc-inner" href="#versão-refatorada-sem-else">Versão Refatorada (<strong>Sem <code>else</code></strong>)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1234"><a class="md-toc-inner" href="#opção-1-early-returns">Opção 1: <strong>Early Returns</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1242"><a class="md-toc-inner" href="#opção-2-lógica-booleana-explícita">Opção 2: <strong>Lógica Booleana Explícita</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1251"><a class="md-toc-inner" href="#exemplo-completo-em-python">Exemplo Completo em Python</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1254"><a class="md-toc-inner" href="#por-que-evitar-else">Por Que Evitar <code>else</code>?</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1263"><a class="md-toc-inner" href="#outras-técnicas-para-eliminar-else">Outras Técnicas para Eliminar <code>else</code>**</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1273"><a class="md-toc-inner" href="#aplicando-em-c">Aplicando em C++</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1276"><a class="md-toc-inner" href="#1-referências-para-clean-code-em-c">1. Referências para <strong>Clean Code em C++</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1277"><a class="md-toc-inner" href="#livros-clássicos">Livros Clássicos</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1278"><a class="md-toc-inner" href="#1-clean-code-a-handbook-of-agile-software-craftsmanship">1. "<strong>Clean Code: A Handbook of Agile Software Craftsmanship</strong>"</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1293"><a class="md-toc-inner" href="#2-clean-c-sustainable-software-development-patterns-and-best-practices">2. "<strong>Clean C++: Sustainable Software Development Patterns and Best Practices</strong>"</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1308"><a class="md-toc-inner" href="#3-effective-c-55-specific-ways-to-improve-your-programs-and-designs">3. "<strong>Effective C++: 55 Specific Ways to Improve Your Programs and Designs</strong>"</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1322"><a class="md-toc-inner" href="#2-referências-para-object-calisthenics-em-c">2. Referências para <strong>Object Calisthenics em C++</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1323"><a class="md-toc-inner" href="#origem-do-conceito">Origem do Conceito</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1334"><a class="md-toc-inner" href="#aplicação-em-c">Aplicação em C++</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1335"><a class="md-toc-inner" href="#artigo-object-calisthenics-applied-to-c">Artigo: "<strong>Object Calisthenics Applied to C++</strong>"</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1341"><a class="md-toc-inner" href="#discussão-no-stack-overflow">Discussão no Stack Overflow</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1348"><a class="md-toc-inner" href="#3-artigos-acadêmicos-e-guias-práticos">3. Artigos Acadêmicos e Guias Práticos</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1349"><a class="md-toc-inner" href="#1-modern-c-best-practices-microsoft-docs">1. "<strong>Modern C++ Best Practices</strong>" (Microsoft Docs)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1357"><a class="md-toc-inner" href="#2-c-core-guidelines-bjarne-stroustrup--herb-sutter">2. "<strong>C++ Core Guidelines</strong>" (Bjarne Stroustrup &amp; Herb Sutter)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1365"><a class="md-toc-inner" href="#3-solid-principles-in-c-artigo-medium">3. "<strong>SOLID</strong> Principles in C++" (Artigo Medium)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1374"><a class="md-toc-inner" href="#4-exemplo-prático-c-com-object-calisthenics"><strong>4. Exemplo Prático</strong> (C++ com Object Calisthenics)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1375"><a class="md-toc-inner" href="#regra-no-else">Regra: "No <code>else</code>"</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1376"><a class="md-toc-inner" href="#antes">Antes</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1378"><a class="md-toc-inner" href="#depois-sem-else">Depois (Sem <code>else</code>)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1387"><a class="md-toc-inner" href="#5-ferramentas-para-aplicar-clean-code-em-c">5. <strong>Ferramentas</strong> para Aplicar <strong>Clean Code em C++</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1400"><a class="md-toc-inner" href="#resumo">Resumo</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1409"><a class="md-toc-inner" href="#aplicações-em-sistemas-embarcados">Aplicações em Sistemas Embarcados</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1412"><a class="md-toc-inner" href="#1-princípios-adaptados-para-embarcados">1. Princípios Adaptados para Embarcados</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1413"><a class="md-toc-inner" href="#a-clean-code-em-embarcados-cc">A. <strong>Clean Code em Embarcados (C/C++)</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1424"><a class="md-toc-inner" href="#depois-clean-code--embarcados">Depois (Clean Code + Embarcados)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1435"><a class="md-toc-inner" href="#4-ferramentas-para-embarcados"><strong>4. Ferramentas para Embarcados</strong></a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1459"><a class="md-toc-inner" href="#resumo-n1459">Resumo</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1480"><a class="md-toc-inner" href="#exemplo-de-máquina-de-estados-sem-else">Exemplo de <strong>máquina de estados sem <code>else</code></strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1483"><a class="md-toc-inner" href="#cenário-controlador-de-motor-dc-com-3-estados">Cenário: <strong>Controlador de Motor DC com 3 Estados</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1492"><a class="md-toc-inner" href="#versão-ruim-com-ifelse-aninhados">Versão Ruim (Com <code>if/else</code> Aninhados)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1501"><a class="md-toc-inner" href="#versão-refatorada-máquina-de-estados-sem-else">Versão Refatorada (Máquina de Estados sem <code>else</code>)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1502"><a class="md-toc-inner" href="#passo-1-definir-os-estados">Passo 1: <strong>Definir os Estados</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1504"><a class="md-toc-inner" href="#passo-2-implementar-transições-sem-else">Passo 2: Implementar <strong>Transições sem <code>else</code></strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1515"><a class="md-toc-inner" href="#versão-com-table-driven-fsm-avançado">Versão com <strong>Table-Driven FSM (Avançado)</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1525"><a class="md-toc-inner" href="#quando-usar-n1525">Quando Usar?</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1534"><a class="md-toc-inner" href="#referências-n1534"><strong>Referências</strong> </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1555"><a class="md-toc-inner" href="#exemplo-no-mundo-real">Exemplo no Mundo Real</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1562"><a class="md-toc-inner" href="#exemplo-para-stm32"><strong>Exemplo para STM32</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1566"><a class="md-toc-inner" href="#hardware-utilizado">Hardware Utilizado</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1580"><a class="md-toc-inner" href="#1-definindo-os-estados-e-hardware-cubemx">1. Definindo os Estados e Hardware (<strong>CubeMX</strong>)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1581"><a class="md-toc-inner" href="#configuração-do-pwm-cubemx">Configuração do PWM (CubeMX)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1594"><a class="md-toc-inner" href="#código-estados-e-inicialização">Código: Estados e Inicialização</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1597"><a class="md-toc-inner" href="#2-máquina-de-estados-sem-else">2. Máquina de Estados sem <code>else</code></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1598"><a class="md-toc-inner" href="#implementação-da-fsm"><strong>Implementação da FSM</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1601"><a class="md-toc-inner" href="#3-loop-principal-mainc">3. Loop Principal (main.c)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1604"><a class="md-toc-inner" href="#4-explicação-das-melhorias">4. Explicação das Melhorias</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1626"><a class="md-toc-inner" href="#5-teste-no-hardware-real">5. Teste no Hardware Real</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1638"><a class="md-toc-inner" href="#referências-para-stm32"><strong>Referências para STM32</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1661"><a class="md-toc-inner" href="#próximos-passos-">Próximos Passos ?</a></span></p></div><hr /><h2><a name="definição" class="md-header-anchor"></a><span>Definição</span></h2><p><strong><span>Object Calisthenics</span></strong><span> é um conjunto de </span><strong><span>9 práticas ou regras</span></strong><span> para melhorar o design de código orientado a objetos (OO), proposto por Jeff Bay no livro </span><em><span>The ThoughtWorks Anthology</span></em><span>. O objetivo é exercitar boas práticas de programação, tornando o código mais </span><strong><span>legível, maintainable e extensível</span></strong><span> através de restrições deliberadas que forçam o uso eficiente de OO.</span></p><h3><a name="as-9-regras-do-object-calisthenics" class="md-header-anchor"></a><span>As </span><strong><span>9 regras do Object Calisthenics</span></strong><span>:</span></h3><ol start='' ><li><p><strong><span>Apenas um nível de indentação por método</span></strong><span>  </span></p><ul><li><span>Evitar aninhamento excessivo (como loops ou </span><code>if</code><span> dentro de </span><code>if</code><span>).  </span></li><li><span>Solução: Extrair lógica em métodos menores.</span></li></ul></li><li><p><strong><span>Não use a palavra-chave </span><code>else</code></strong><span>  </span></p><ul><li><span>Substitua </span><code>else</code><span> por estruturas como </span><strong><span>early returns</span></strong><span> ou polimorfismo.  </span></li><li><span>Exemplo: Usar </span><code>return</code><span> antecipado ou Strategy Pattern.</span></li></ul></li><li><p><strong><span>Envolva todos os tipos primitivos e strings</span></strong><span>  </span></p><ul><li><span>Evite primitivos (como </span><code>int</code><span>, </span><code>string</code><span>) para representar conceitos de domínio.  </span></li><li><span>Exemplo: Criar uma classe </span><code>Cpf</code><span> em vez de usar </span><code>string cpf</code><span>.</span></li></ul></li><li><p><strong><span>Coleções como first-class citizens</span></strong><span>  </span></p><ul><li><span>Encapsule coleções (listas, arrays) em classes próprias com métodos específicos.  </span></li><li><span>Exemplo: </span><code>class Pedido { List&lt;Item&gt; itens; }</code><span> → </span><code>class ItensPedido { ... }</code><span>.</span></li></ul></li><li><p><strong><span>Apenas um ponto (</span><code>.</code><span>) por linha (Lei de Demeter)</span></strong><span>  </span></p><ul><li><span>Evitar cadeias de chamadas como </span><code>obj.getA().getB().doSomething()</code><span>.  </span></li><li><span>Solução: Encapsular a lógica em métodos ou classes.</span></li></ul></li><li><p><strong><span>Não abrevie nomes</span></strong><span>  </span></p><ul><li><span>Nomes descritivos (ex: </span><code>Cliente</code><span> em vez de </span><code>Cli</code><span>) melhoram a legibilidade.  </span></li><li><span>Evite abreviações que exigem interpretação.</span></li></ul></li><li><p><strong><span>Mantenha entidades pequenas</span></strong><span>  </span></p><ul><li><span>Classes com </span><strong><span>no máximo 50 linhas</span></strong><span> e métodos com </span><strong><span>até 5 linhas</span></strong><span>.  </span></li><li><span>Força a divisão de responsabilidades.</span></li></ul></li><li><p><strong><span>Nenhuma classe com mais de duas variáveis de instância</span></strong><span>  </span></p><ul><li><span>Limita a complexidade das classes, incentivando coesão.  </span></li><li><span>Exceção: Classes que agrupam dados simples (como </span><code>Point(x, y)</code><span>).</span></li></ul></li><li><p><strong><span>Não use getters/setters (ou propriedades públicas)</span></strong><span>  </span></p><ul><li><span>Evite expor estado interno. Prefira métodos com comportamentos significativos.  </span></li><li><span>Exemplo: </span><code>cliente.efetuarPagamento()</code><span> em vez de </span><code>cliente.setSaldo(...)</code><span>.</span></li></ul></li></ol><h3><a name="objetivo" class="md-header-anchor"></a><span>Objetivo:  </span></h3><p><span>Essas regras forçam você a pensar em </span><strong><span>design orientado a objetos puro</span></strong><span>, evitando vícios de código procedural (como classes &quot;God Objects&quot;) e promovendo:  </span></p><ul><li><strong><span>Baixo acoplamento</span></strong><span>  </span></li><li><strong><span>Alta coesão</span></strong><span>  </span></li><li><strong><span>Código expressivo</span></strong><span>  </span></li></ul><h3><a name="quando-usar" class="md-header-anchor"></a><strong><span>Quando usar?</span></strong></h3><ul><li><span>Em exercícios de refatoração ou katas de programação.  </span></li><li><span>Para treinar design OO em projetos pequenos.  </span></li><li><span>Não são dogmas: adapte conforme a necessidade do projeto.  </span></li></ul><p><span>Você já aplicou alguma dessas regras intuitivamente? Alguma delas parece especialmente útil (ou controversa)?</span></p><h2><a name="videos-youtube" class="md-header-anchor"></a><span>Videos YouTube</span></h2><ul><li><span>Vídeos de </span><a href='https://www.youtube.com/@RenatoAugustoTech'><span>Renato Augusto</span></a><span>, por exemplo:</span></li><li><span>YouTube: </span><a href='https://www.youtube.com/watch?v=YGNH71KPIes'><span>Object Calisthenics: A ARMADILHA dos TIPOS PRIMITIVOS! Seu código está FRÁGIL por causa disso!</span></a><span>, #ObjectCalisthenics, </span><a href='https://www.youtube.com/@RenatoAugustoTech'><span>Renato Augusto</span></a><span>, 16/03/2025:</span>
<em><span>no vídeo de hoje vamos falar sobre um erro comum que pode estar prejudicando seu código e também ferindo princípios básicos da programação orientada a objetos (POO): a obsessão por tipos primitivos! Será que você está realmente aplicando os princípios da orientação a objetos e do Domain-Driven Design (DDD) no seu código? Se você usa int, string e boolean para tudo, sem encapsular dados em Value Objects, pode estar violando princípios essenciais, como coesão, encapsulamento e SRP (Single Responsibility Principle) do SOLID. No vídeo de hoje, você vai aprender como evitar esse problema e escrever um código mais robusto e alinhado aos princípios SOLID.</span></em></li><li><span>YouTube: </span><a href='https://www.youtube.com/watch?v=KXaPJhG9yCk'><span>Object Calisthenics: LEI DE DEMETER - A Técnica Para Eliminar DEPENDÊNCIAS Ocultas no seu Código!</span></a><span>,  </span><a href='https://www.youtube.com/@RenatoAugustoTech'><span>Renato Augusto</span></a><span>, 13/04/2025, </span><a href='https://www.youtube.com/hashtag/cleancode'><span>#CleanCode</span></a><span> </span><a href='https://www.youtube.com/hashtag/solid'><span>#solid</span></a><span> </span><a href='https://www.youtube.com/hashtag/orientacaoaobjetos'><span>#orientacaoaobjetos</span></a><span>:</span>
<em><span>hoje vamos explorar mais uma regra essencial do Object Calisthenics: a poderosa Lei de Demeter e que está relacionada com orientação a objetos avançada e também a conceitos do domain driven design como o Agregate Root. Você já se deparou com um código difícil de manter, cheio de dependências ocultas e chamadas encadeadas intermináveis? Provavelmente, você estava violando a Lei de Demeter, uma das melhores práticas para criar código limpo, coeso e fácil de manter. Neste vídeo, você aprenderá exatamente o que é a Lei de Demeter, como identificá-la e, principalmente, como aplicar essa regra para desacoplar o seu código e aumentar sua qualidade e legibilidade e também seu nível de orientação a objetos. Vou mostrar exemplos reais e práticos, antes e depois da refatoração, tudo isso de maneira totalmente agnóstica de linguagem de programação.</span></em></li></ul><h2><a name="referências" class="md-header-anchor"></a><strong><span>Referências</span></strong></h2><p><span>A metodologia </span><strong><span>Object Calisthenics</span></strong><span> foi proposta originalmente por </span><strong><span>Jeff Bay</span></strong><span> em um capítulo do livro </span><strong><span>&quot;The ThoughtWorks Anthology: Essays on Software Technology and Innovation&quot;</span></strong><span> (2008), publicado pela editora </span><strong><span>Pragmatic Bookshelf</span></strong><span>. Esse livro é uma coletânea de artigos escritos por profissionais da ThoughtWorks, uma consultoria de software conhecida por promover boas práticas de engenharia de software.</span></p><h3><a name="origem-e-referências-principais" class="md-header-anchor"></a><span>Origem e </span><strong><span>Referências Principais</span></strong></h3><ol start='' ><li><p><strong><span>Fonte Original</span></strong><span>:  </span></p><ul><li><span>O ensaio de Jeff Bay, intitulado </span><strong><span>&quot;Object Calisthenics&quot;</span></strong><span>, aparece no </span><strong><span>Capítulo 6</span></strong><span> do livro </span><em><span>The ThoughtWorks Anthology</span></em><span>.  </span></li><li><strong><span>Não é um artigo acadêmico</span></strong><span>, mas sim um texto prático, focado em exercícios para melhorar habilidades em programação orientada a objetos (OO).  </span></li></ul></li><li><p><strong><span>Contexto e Influências</span></strong><span>:  </span></p><ul><li><span>A ideia se alinha com princípios de OO clássicos, como os do </span><strong><span>&quot;Design Orientado a Objetos&quot;</span></strong><span> (Bertrand Meyer, </span><em><span>Object-Oriented Software Construction</span></em><span>) e os </span><strong><span>SOLID principles</span></strong><span> (Robert C. Martin).  </span></li><li><span>Também reflete conceitos de </span><strong><span>&quot;Clean Code&quot;</span></strong><span> (livro de Robert C. Martin) e </span><strong><span>&quot;Domain-Driven Design&quot;</span></strong><span> (Eric Evans).  </span></li></ul></li><li><p><strong><span>Disseminação</span></strong><span>:  </span></p><ul><li><span>O termo ganhou popularidade em comunidades ágeis e em exercícios de </span><em><span>coding katas</span></em><span>, mas </span><strong><span>não há um paper acadêmico formal associado</span></strong><span>. É mais uma prática difundida em blogs e workshops.  </span></li></ul></li></ol><h3><a name="onde-encontrar" class="md-header-anchor"></a><span>Onde Encontrar?</span></h3><ul><li><p><span>Livro </span><em><span>The ThoughtWorks Anthology</span></em><span> (2008):  </span></p><ul><li><a href='https://pragprog.com/titles/twa/thoughtworks-anthology/'><span>Link na Pragmatic Bookshelf</span></a><span>  </span></li></ul></li><li><p><span>Discussões derivadas:  </span></p><ul><li><span>Artigos no blog da ThoughtWorks e em fóruns como </span><em><span>Dev.to</span></em><span> e </span><em><span>Stack Overflow</span></em><span>.  </span></li></ul></li></ul><h3><a name="comparação-com-outras-metodologias" class="md-header-anchor"></a><span>Comparação com </span><strong><span>Outras Metodologias</span></strong></h3><ul><li><strong><span>Similar ao &quot;SOLID&quot;</span></strong><span>, mas com regras mais concretas e restritivas (como um </span><em><span>exercício</span></em><span>).  </span></li><li><strong><span>Inspirado em &quot;Clean Code&quot;</span></strong><span>, porém focado especificamente em OO (não em padrões gerais).  </span></li></ul><p><span>Se quiser explorar mais, recomendo o livro original ou materiais sobre </span><strong><span>refatoração</span></strong><span> (Martin Fowler) e </span><strong><span>design OO</span></strong><span>. Você já teve contato com algum desses autores?</span></p><p><span>Aqui está a referência formal no </span><strong><span>estilo Harvard</span></strong><span>, incluindo links disponíveis para as fontes principais relacionadas ao </span><strong><span>Object Calisthenics</span></strong><span>:</span></p><hr /><h3><a name="referência-primária-origem-do-conceito" class="md-header-anchor"></a><span>Referência Primária (</span><strong><span>Origem do Conceito</span></strong><span>)</span></h3><p><span>Bay, J. (2008) </span><em><span>Object Calisthenics</span></em><span>. In: </span><em><span>The ThoughtWorks Anthology: Essays on Software Technology and Innovation</span></em><span>. 1st ed. Raleigh, NC: Pragmatic Bookshelf, pp. 117–136.  </span></p><ul><li><strong><span>Disponível em</span></strong><span>: </span><a href='https://pragprog.com/titles/twa/thoughtworks-anthology/'><span>Pragmatic Bookshelf</span></a><span> (Capítulo 6).  </span></li><li><strong><span>ISBN</span></strong><span>: 978-1-934356-10-3.  </span></li></ul><hr /><h3><a name="referências-secundárias-influências-e-contexto" class="md-header-anchor"></a><span>Referências Secundárias (</span><strong><span>Influências e Contexto</span></strong><span>)</span></h3><ol start='' ><li><p><span>Martin, R.C. (2000) </span><em><span>Design Principles and Design Patterns</span></em><span>. [Online]  </span></p><ul><li><strong><span>Link</span></strong><span>: </span><a href='http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf'><span>Object Mentor Blog</span></a><span> (Base para os princípios SOLID, que influenciaram o Object Calisthenics).  </span></li></ul></li><li><p><span>Fowler, M. (1999) </span><em><span>Refactoring: Improving the Design of Existing Code</span></em><span>. 1st ed. Boston: Addison-Wesley.  </span></p><ul><li><strong><span>ISBN</span></strong><span>: 978-0201485677.  </span></li></ul></li><li><p><span>Evans, E. (2003) </span><em><span>Domain-Driven Design: Tackling Complexity in the Heart of Software</span></em><span>. 1st ed. Boston: Addison-Wesley.  </span></p><ul><li><strong><span>ISBN</span></strong><span>: 978-0321125217.  </span></li></ul></li></ol><hr /><h3><a name="observações" class="md-header-anchor"></a><span>Observações</span></h3><ul><li><span>O texto de Jeff Bay </span><strong><span>não é um artigo acadêmico</span></strong><span>, mas um capítulo de livro prático. Não possui DOI ou publicação em periódico científico.  </span></li><li><span>Para citações acadêmicas, recomenda-se complementar com trabalhos sobre </span><strong><span>SOLID</span></strong><span> (Martin, 2000) ou </span><strong><span>Clean Code</span></strong><span> (Martin, 2008), que tratam de princípios similares.  </span></li></ul><hr /><p><span>Aqui estão as referências </span><strong><span>mais contundentes e amplamente citadas</span></strong><span> para guiar a produção de código em </span><strong><span>Python</span></strong><span> usando </span><strong><span>Clean Code</span></strong><span> e </span><strong><span>Object Calisthenics</span></strong><span>, incluindo livros clássicos, artigos influentes e materiais específicos para Python:  </span></p><hr /><h1><a name="aplicando-em-python" class="md-header-anchor"></a><span>Aplicando em Python</span></h1><h2><a name="1-clean-code--boas-práticas-em-python" class="md-header-anchor"></a><span>1. </span><strong><span>Clean Code</span></strong><span> &amp; Boas Práticas em Python</span></h2><h3><a name="livro-mais-referenciado-clean-code---robert-c-martin" class="md-header-anchor"></a><span>Livro mais referenciado (</span><strong><span>Clean Code - Robert C. Martin</span></strong><span>)</span></h3><p><span>Martin, R.C. (2008) </span><em><span>Clean Code: A Handbook of Agile Software Craftsmanship</span></em><span>. 1st ed. Upper Saddle River, NJ: Prentice Hall.  </span></p><ul><li><p><strong><span>ISBN</span></strong><span>: 978-0132350884  </span></p></li><li><p><strong><span>Por que é relevante?</span></strong><span>  </span></p><ul><li><span>Princípios como </span><em><span>&quot;Meaningful Names&quot;</span></em><span>, </span><em><span>&quot;Small Functions&quot;</span></em><span>, e </span><em><span>&quot;SOLID&quot;</span></em><span> são diretamente aplicáveis em Python.  </span></li><li><span>Apesar de usar Java nos exemplos, os conceitos são universais.  </span></li></ul></li></ul><h3><a name="adaptação-para-python" class="md-header-anchor"></a><span>Adaptação para Python</span></h3><p><span>Van Rossum, G., Warsaw, B. &amp; Coghlan, N. (2001) </span><em><span>PEP 8 -- Style Guide for Python Code</span></em><span>. [Online] Python Software Foundation.  </span></p><ul><li><p><strong><span>Link</span></strong><span>: </span><a href='https://peps.python.org/pep-0008/'><span>PEP 8</span></a><span>  </span></p></li><li><p><strong><span>Por que é relevante?</span></strong><span>  </span></p><ul><li><span>O </span><em><span>style guide</span></em><span> oficial do Python, complementar ao </span><em><span>Clean Code</span></em><span>, com regras específicas para legibilidade (ex: nomes de variáveis, indentação).  </span></li></ul></li></ul><h3><a name="livro-específico-para-python" class="md-header-anchor"></a><span>Livro específico para Python</span></h3><p><span>Meier, K. (2023) </span><em><span>Clean Code in Python: Develop maintainable and efficient code</span></em><span>. 2nd ed. Birmingham: Packt Publishing.  </span></p><ul><li><p><strong><span>ISBN</span></strong><span>: 978-1800560215  </span></p></li><li><p><strong><span>Por que é relevante?</span></strong><span>  </span></p><ul><li><span>Aplica princípios do </span><em><span>Clean Code</span></em><span> e </span><em><span>SOLID</span></em><span> em Python, com exemplos de </span><em><span>design patterns</span></em><span> e refatoração.  </span></li></ul></li></ul><hr /><h2><a name="2-object-calisthenics--design-orientado-a-objetos-em-python" class="md-header-anchor"></a><span>2. </span><strong><span>Object Calisthenics</span></strong><span> &amp; Design Orientado a Objetos em Python</span></h2><h3><a name="origem-do-object-calisthenics" class="md-header-anchor"></a><span>Origem do Object Calisthenics</span></h3><p><span>Bay, J. (2008) </span><em><span>Object Calisthenics</span></em><span>. In: </span><em><span>The ThoughtWorks Anthology</span></em><span>. 1st ed. Raleigh, NC: Pragmatic Bookshelf, pp. 117–136.  </span></p><ul><li><p><strong><span>Link</span></strong><span>: </span><a href='https://pragprog.com/titles/twa/thoughtworks-anthology/'><span>Livro (PragProg)</span></a><span>  </span></p></li><li><p><strong><span>Por que é relevante?</span></strong><span>  </span></p><ul><li><span>As 9 regras são aplicáveis em Python (ex: evitar </span><code>else</code><span>, classes pequenas).  </span></li></ul></li></ul><h3><a name="aplicação-prática-em-python" class="md-header-anchor"></a><strong><span>Aplicação Prática</span></strong><span> em Python</span></h3><p><span>Artigo: </span><em><span>&quot;Python and the Principles of Object-Oriented Design&quot;</span></em><span> (2020) por Brandon Rhodes.  </span></p><ul><li><p><strong><span>Link</span></strong><span>: </span><a href='https://youtu.be/HTLu2DFOdTg'><span>PyOhio Talk</span></a><span> (vídeo) + </span><a href='https://rhodesmill.org/brandon/slides/2020-07-pyohio/'><span>Slides</span></a><span>  </span></p></li><li><p><strong><span>Por que é relevante?</span></strong><span>  </span></p><ul><li><span>Explica como usar OO em Python sem violar idiomas do Python (ex: </span><em><span>dunder methods</span></em><span>, composição).  </span></li></ul></li></ul><h3><a name="livro-avançado-python-oo" class="md-header-anchor"></a><span>Livro Avançado (Python OO)</span></h3><p><span>Lott, S.F. (2019) </span><em><span>Python Object-Oriented Programming</span></em><span>. 4th ed. Birmingham: Packt Publishing.  </span></p><ul><li><p><strong><span>ISBN</span></strong><span>: 978-1789615852  </span></p></li><li><p><strong><span>Por que é relevante?</span></strong><span>  </span></p><ul><li><span>Aborda </span><em><span>design patterns</span></em><span>, SOLID e boas práticas de OO em Python.  </span></li></ul></li></ul><hr /><h2><a name="3-artigos-acadêmicos-complementares" class="md-header-anchor"></a><span>3. </span><strong><span>Artigos Acadêmicos</span></strong><span> Complementares</span></h2><ol start='' ><li><p><strong><span>&quot;How to Write Clean Code?&quot;</span></strong><span> (2019) – Uma revisão sistemática de boas práticas.  </span></p><ul><li><span>Börstler, J. et al. </span><em><span>IEEE Software</span></em><span>, 36(6), pp. 81–89.  </span></li><li><strong><span>DOI</span></strong><span>: </span><a href='https://doi.org/10.1109/MS.2019.2942318'><span>10.1109/MS.2019.2942318</span></a><span>  </span></li></ul></li><li><p><strong><span>&quot;Pythonic Code Review&quot;</span></strong><span> (2021) – Critérios para código limpo em Python.  </span></p><ul><li><span>Feliciano, J. </span><em><span>Journal of Open Source Software</span></em><span>, 6(62), 3201.  </span></li><li><strong><span>DOI</span></strong><span>: </span><a href='https://doi.org/10.21105/joss.03201'><span>10.21105/joss.03201</span></a><span>  </span></li></ul></li></ol><hr /><h2><a name="4-outras-referências" class="md-header-anchor"></a><span>4. Outras Referências?</span></h2><ul><li><strong><span>Para Python puro</span></strong><span>: Comece com </span><strong><span>PEP 8</span></strong><span> + </span><em><span>Clean Code in Python</span></em><span> (Meier).  </span></li><li><strong><span>Para OO avançado</span></strong><span>: </span><em><span>Python Object-Oriented Programming</span></em><span> (Lott) + vídeo de Brandon Rhodes.  </span></li><li><strong><span>Para exercícios</span></strong><span>: Aplique as regras do </span><em><span>Object Calisthenics</span></em><span> (Bay) em </span><em><span>coding katas</span></em><span>.  </span></li></ul><hr /><h2><a name="exemplo" class="md-header-anchor"></a><span>Exemplo</span></h2><p><span>Aqui está um </span><strong><span>exemplo prático em Python</span></strong><span> aplicando a regra </span><strong><span>&quot;No </span><code>else</code><span>&quot;</span></strong><span> do </span><em><span>Object Calisthenics</span></em><span>, com comparação entre o código antes e depois da refatoração:</span></p><hr /><h3><a name="cenário-validar-acesso-de-usuário" class="md-header-anchor"></a><span>Cenário: Validar acesso de usuário</span></h3><p><span>Suponha que precisamos verificar se um usuário tem permissão para acessar um recurso, com duas condições:  </span></p><ol start='' ><li><span>O usuário deve estar </span><strong><span>logado</span></strong><span>.  </span></li><li><span>O usuário deve ser </span><strong><span>admin</span></strong><span> ou ter </span><strong><span>idade ≥ 18</span></strong><span>.  </span></li></ol><hr /><h3><a name="versão-inicial-com-else" class="md-header-anchor"></a><span>Versão Inicial (</span><strong><span>Com </span><code>else</code></strong><span>)</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">check_access</span>(<span class="cm-variable">user</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">user</span>.<span class="cm-property">is_logged_in</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">user</span>.<span class="cm-property">is_admin</span> <span class="cm-keyword">or</span> <span class="cm-variable">user</span>.<span class="cm-property">age</span> <span class="cm-operator">&gt;</span>= <span class="cm-number">18</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">True</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">False</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">False</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 152px;"></div><div class="CodeMirror-gutters" style="display: none; height: 152px;"></div></div></div></pre><p><strong><span>Problemas</span></strong><span>:  </span></p><ul><li><span>Níveis aninhados de </span><code>if/else</code><span>.  </span></li><li><span>Código pouco legível e difícil de manter.  </span></li></ul><hr /><h3><a name="versão-refatorada-sem-else" class="md-header-anchor"></a><span>Versão Refatorada (</span><strong><span>Sem </span><code>else</code></strong><span>)</span></h3><p><span>Regra aplicada: </span><strong><span>Substituir </span><code>else</code><span> por </span><em><span>early returns</span></em><span> ou lógica booleana</span></strong><span>.  </span></p><h4><a name="opção-1-early-returns" class="md-header-anchor"></a><span>Opção 1: </span><strong><span>Early Returns</span></strong></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">check_access</span>(<span class="cm-variable">user</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-keyword">not</span> <span class="cm-variable">user</span>.<span class="cm-property">is_logged_in</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">False</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">user</span>.<span class="cm-property">is_admin</span> <span class="cm-keyword">or</span> <span class="cm-variable">user</span>.<span class="cm-property">age</span> <span class="cm-operator">&gt;</span>= <span class="cm-number">18</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 95px;"></div><div class="CodeMirror-gutters" style="display: none; height: 95px;"></div></div></div></pre><p><strong><span>Melhorias</span></strong><span>:  </span></p><ul><li><span>Elimina todos os </span><code>else</code><span>.  </span></li><li><span>Condições são validadas imediatamente (</span><em><span>fail-fast</span></em><span>).  </span></li></ul><h4><a name="opção-2-lógica-booleana-explícita" class="md-header-anchor"></a><span>Opção 2: </span><strong><span>Lógica Booleana Explícita</span></strong></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">check_access</span>(<span class="cm-variable">user</span>):</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">user</span>.<span class="cm-property">is_logged_in</span> <span class="cm-keyword">and</span> (<span class="cm-variable">user</span>.<span class="cm-property">is_admin</span> <span class="cm-keyword">or</span> <span class="cm-variable">user</span>.<span class="cm-property">age</span> <span class="cm-operator">&gt;</span>= <span class="cm-number">18</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 38px;"></div><div class="CodeMirror-gutters" style="display: none; height: 38px;"></div></div></div></pre><p><strong><span>Melhorias</span></strong><span>:  </span></p><ul><li><span>Uma única linha, sem condicionais.  </span></li><li><span>Mais </span><em><span>pythonico</span></em><span> (usa operadores lógicos nativos).  </span></li></ul><hr /><h3><a name="exemplo-completo-em-python" class="md-header-anchor"></a><span>Exemplo Completo em Python</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">User</span>:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">def</span> <span class="cm-def">__init__</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">is_logged_in</span>, <span class="cm-variable">is_admin</span>, <span class="cm-variable">age</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">self</span>.<span class="cm-property">is_logged_in</span> = <span class="cm-variable">is_logged_in</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">self</span>.<span class="cm-property">is_admin</span> = <span class="cm-variable">is_admin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">self</span>.<span class="cm-property">age</span> = <span class="cm-variable">age</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Teste</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">user1</span> = <span class="cm-variable">User</span>(<span class="cm-variable">is_logged_in</span>=<span class="cm-keyword">True</span>, <span class="cm-variable">is_admin</span>=<span class="cm-keyword">False</span>, <span class="cm-variable">age</span>=<span class="cm-number">20</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">user2</span> = <span class="cm-variable">User</span>(<span class="cm-variable">is_logged_in</span>=<span class="cm-keyword">True</span>, <span class="cm-variable">is_admin</span>=<span class="cm-keyword">False</span>, <span class="cm-variable">age</span>=<span class="cm-number">15</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">check_access</span>(<span class="cm-variable">user1</span>)) &nbsp;<span class="cm-comment"># True (idade &gt;= 18)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">check_access</span>(<span class="cm-variable">user2</span>)) &nbsp;<span class="cm-comment"># False</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 228px;"></div><div class="CodeMirror-gutters" style="display: none; height: 228px;"></div></div></div></pre><hr /><h2><a name="por-que-evitar-else" class="md-header-anchor"></a><span>Por Que Evitar </span><code>else</code><span>?</span></h2><ol start='' ><li><strong><span>Reduz complexidade ciclomática</span></strong><span>: Menos ramificações = código mais testável.  </span></li><li><strong><span>Legibilidade</span></strong><span>: Condições positivas são mais fáceis de entender.  </span></li><li><strong><span>Alinhamento com Python</span></strong><span>: O </span><em><span>Zen of Python</span></em><span> diz: </span><em><span>&quot;Flat is better than nested&quot;</span></em><span>.  </span></li></ol><hr /><h2><a name="outras-técnicas-para-eliminar-else" class="md-header-anchor"></a><span>Outras Técnicas para Eliminar </span><code>else</code><span>**</span></h2><ul><li><strong><span>Polimorfismo</span></strong><span>: Usar classes diferentes para comportamentos distintos.  </span></li><li><strong><span>Dicionários de funções</span></strong><span>: Mapear condições para ações.  </span></li><li><strong><span>Padrão Strategy</span></strong><span>: Extrair lógica condicional para classes separadas.  </span></li></ul><p><span>Quer ver um exemplo com </span><strong><span>polimorfismo</span></strong><span> ou outra técnica? Posso adaptar!</span></p><hr /><h1><a name="aplicando-em-c" class="md-header-anchor"></a><span>Aplicando em C++</span></h1><p><span>Os princípios de </span><strong><span>Clean Code</span></strong><span> e </span><strong><span>Object Calisthenics</span></strong><span> são </span><strong><span>totalmente aplicáveis em C++</span></strong><span> e podem melhorar significativamente a qualidade do seu código. Abaixo estão as </span><strong><span>melhores referências</span></strong><span> (livros, artigos e páginas web) para guiar essa prática em C++:</span></p><hr /><h2><a name="1-referências-para-clean-code-em-c" class="md-header-anchor"></a><span>1. Referências para </span><strong><span>Clean Code em C++</span></strong></h2><h3><a name="livros-clássicos" class="md-header-anchor"></a><span>Livros Clássicos</span></h3><h4><a name="1-clean-code-a-handbook-of-agile-software-craftsmanship" class="md-header-anchor"></a><span>1. &quot;</span><strong><span>Clean Code: A Handbook of Agile Software Craftsmanship</span></strong><span>&quot;</span></h4><ul><li><p><strong><span>Autor</span></strong><span>: Robert C. Martin (&quot;Uncle Bob&quot;)  </span></p></li><li><p><strong><span>Ano</span></strong><span>: 2008  </span></p></li><li><p><strong><span>ISBN</span></strong><span>: 978-0132350884  </span></p></li><li><p><strong><span>Relevância</span></strong><span>:  </span></p><ul><li><span>Princípios universais (nomes significativos, funções pequenas, SOLID) aplicáveis em C++.  </span></li><li><span>Exemplos em Java, mas conceitos transferíveis.  </span></li></ul></li></ul><h4><a name="2-clean-c-sustainable-software-development-patterns-and-best-practices" class="md-header-anchor"></a><span>2. &quot;</span><strong><span>Clean C++: Sustainable Software Development Patterns and Best Practices</span></strong><span>&quot;</span></h4><ul><li><p><strong><span>Autor</span></strong><span>: Stephan Roth  </span></p></li><li><p><strong><span>Ano</span></strong><span>: 2017  </span></p></li><li><p><strong><span>ISBN</span></strong><span>: 978-1484233651  </span></p></li><li><p><strong><span>Relevância</span></strong><span>:  </span></p><ul><li><span>Adapta </span><em><span>Clean Code</span></em><span> especificamente para C++.  </span></li><li><span>Aborda RAII, gerenciamento de memória, e boas práticas modernas.  </span></li></ul></li></ul><h4><a name="3-effective-c-55-specific-ways-to-improve-your-programs-and-designs" class="md-header-anchor"></a><span>3. &quot;</span><strong><span>Effective C++: 55 Specific Ways to Improve Your Programs and Designs</span></strong><span>&quot;</span></h4><ul><li><p><strong><span>Autor</span></strong><span>: Scott Meyers  </span></p></li><li><p><strong><span>Ano</span></strong><span>: 2005 (3ª ed.)  </span></p></li><li><p><strong><span>ISBN</span></strong><span>: 978-0321334879  </span></p></li><li><p><strong><span>Relevância</span></strong><span>:  </span></p><ul><li><span>Clássico absoluto em boas práticas de C++ (encapsulamento, design de classes, evitando vazamentos).  </span></li></ul></li></ul><hr /><h2><a name="2-referências-para-object-calisthenics-em-c" class="md-header-anchor"></a><span>2. Referências para </span><strong><span>Object Calisthenics em C++</span></strong></h2><h3><a name="origem-do-conceito" class="md-header-anchor"></a><span>Origem do Conceito</span></h3><ul><li><p><strong><span>Capítulo &quot;Object Calisthenics&quot;</span></strong><span>  </span></p><ul><li><strong><span>Autor</span></strong><span>: Jeff Bay  </span></li><li><strong><span>Livro</span></strong><span>: </span><em><span>The ThoughtWorks Anthology</span></em><span> (2008)  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://pragprog.com/titles/twa/thoughtworks-anthology/'><span>PragProg</span></a><span>  </span></li></ul></li></ul><h3><a name="aplicação-em-c" class="md-header-anchor"></a><span>Aplicação em C++</span></h3><h4><a name="artigo-object-calisthenics-applied-to-c" class="md-header-anchor"></a><span>Artigo: &quot;</span><strong><span>Object Calisthenics Applied to C++</span></strong><span>&quot;</span></h4><ul><li><strong><span>Autor</span></strong><span>: Community posts (Dev.to, Medium)  </span></li><li><strong><span>Exemplo</span></strong><span>: </span><a href='https://dev.to/rafaelcp/object-calisthenics-101-why-and-how-3o0a'><span>Applying Object Calisthenics in C++</span></a><span>  </span></li></ul><h4><a name="discussão-no-stack-overflow" class="md-header-anchor"></a><span>Discussão no Stack Overflow</span></h4><ul><li><strong><span>Tópico</span></strong><span>: </span><em><span>&quot;How to apply Object Calisthenics in C++?&quot;</span></em><span>  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://stackoverflow.com/questions/778699/how-to-write-clean-code-in-c'><span>Stack Overflow Discussion</span></a><span>  </span></li></ul><hr /><h2><a name="3-artigos-acadêmicos-e-guias-práticos" class="md-header-anchor"></a><span>3. Artigos Acadêmicos e Guias Práticos</span></h2><h3><a name="1-modern-c-best-practices-microsoft-docs" class="md-header-anchor"></a><span>1. &quot;</span><strong><span>Modern C++ Best Practices</span></strong><span>&quot; (Microsoft Docs)</span></h3><ul><li><strong><span>Autor</span></strong><span>: Microsoft C++ Team  </span></li><li><strong><span>Ano</span></strong><span>: Atualizado constantemente  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://docs.microsoft.com/en-us/cpp/cpp/welcome-back-to-cpp-modern-cpp'><span>Microsoft C++ Docs</span></a><span>  </span></li></ul><h3><a name="2-c-core-guidelines-bjarne-stroustrup--herb-sutter" class="md-header-anchor"></a><span>2. &quot;</span><strong><span>C++ Core Guidelines</span></strong><span>&quot; (Bjarne Stroustrup &amp; Herb Sutter)</span></h3><ul><li><strong><span>Autor</span></strong><span>: Criadores do C++  </span></li><li><strong><span>Ano</span></strong><span>: 2015 (em constante evolução)  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://github.com/isocpp/CppCoreGuidelines'><span>GitHub C++ Core Guidelines</span></a><span>  </span></li></ul><h3><a name="3-solid-principles-in-c-artigo-medium" class="md-header-anchor"></a><span>3. &quot;</span><strong><span>SOLID</span></strong><span> Principles in C++&quot; (Artigo Medium)</span></h3><ul><li><strong><span>Autor</span></strong><span>: Dmitri Nesteruk  </span></li><li><strong><span>Ano</span></strong><span>: 2020  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://medium.com/hackernoon/solid-principles-in-c-the-dependency-inversion-principle-1b2a0a7b7a7'><span>SOLID C++ Explained</span></a><span>  </span></li></ul><hr /><h2><a name="4-exemplo-prático-c-com-object-calisthenics" class="md-header-anchor"></a><strong><span>4. Exemplo Prático</span></strong><span> (C++ com Object Calisthenics)</span></h2><h3><a name="regra-no-else" class="md-header-anchor"></a><span>Regra: &quot;No </span><code>else</code><span>&quot;</span></h3><h4><a name="antes" class="md-header-anchor"></a><span>Antes</span></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="cpp"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">checkAccess</span>(<span class="cm-keyword">const</span> <span class="cm-variable">User</span><span class="cm-operator">&amp;</span> <span class="cm-variable">user</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">user</span>.<span class="cm-variable">isLoggedIn</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">user</span>.<span class="cm-variable">isAdmin</span>() <span class="cm-operator">||</span> <span class="cm-variable">user</span>.<span class="cm-variable">getAge</span>() <span class="cm-operator">&gt;=</span> <span class="cm-number">18</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 209px;"></div><div class="CodeMirror-gutters" style="display: none; height: 209px;"></div></div></div></pre><h4><a name="depois-sem-else" class="md-header-anchor"></a><span>Depois (Sem </span><code>else</code><span>)</span></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="cpp"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">checkAccess</span>(<span class="cm-keyword">const</span> <span class="cm-variable">User</span><span class="cm-operator">&amp;</span> <span class="cm-variable">user</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">user</span>.<span class="cm-variable">isLoggedIn</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">user</span>.<span class="cm-variable">isAdmin</span>() <span class="cm-operator">||</span> <span class="cm-variable">user</span>.<span class="cm-variable">getAge</span>() <span class="cm-operator">&gt;=</span> <span class="cm-number">18</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 114px;"></div><div class="CodeMirror-gutters" style="display: none; height: 114px;"></div></div></div></pre><p><strong><span>Melhorias</span></strong><span>:  </span></p><ul><li><span>Elimina </span><code>else</code><span> com </span><em><span>early return</span></em><span>.  </span></li><li><span>Reduz aninhamento e melhora legibilidade.  </span></li></ul><hr /><h2><a name="5-ferramentas-para-aplicar-clean-code-em-c" class="md-header-anchor"></a><span>5. </span><strong><span>Ferramentas</span></strong><span> para Aplicar </span><strong><span>Clean Code em C++</span></strong></h2><ol start='' ><li><p><strong><span>Clang-Tidy</span></strong><span>: Analisa código C++ seguindo boas práticas.  </span></p><ul><li><a href='https://clang.llvm.org/extra/clang-tidy/'><span>Documentação</span></a><span>  </span></li></ul></li><li><p><strong><span>Cppcheck</span></strong><span>: Verificador estático para C++.  </span></p><ul><li><a href='http://cppcheck.sourceforge.net/'><span>Site Oficial</span></a><span>  </span></li></ul></li></ol><hr /><h3><a name="resumo" class="md-header-anchor"></a><span>Resumo</span></h3><ul><li><strong><span>Clean Code</span></strong><span> e </span><strong><span>Object Calisthenics</span></strong><span> funcionam muito bem em C++.  </span></li><li><strong><span>Livros essenciais</span></strong><span>: </span><em><span>Clean Code</span></em><span> (Martin), </span><em><span>Effective C++</span></em><span> (Meyers), </span><em><span>Clean C++</span></em><span> (Roth).  </span></li><li><strong><span>Guias práticos</span></strong><span>: </span><em><span>C++ Core Guidelines</span></em><span> e </span><em><span>Microsoft Docs</span></em><span>.  </span></li></ul><hr /><h1><a name="aplicações-em-sistemas-embarcados" class="md-header-anchor"></a><span>Aplicações em Sistemas Embarcados</span></h1><p><span>Os princípios de </span><strong><span>Clean Code</span></strong><span> e </span><strong><span>Object Calisthenics</span></strong><span> podem ser aplicados em </span><strong><span>C/C++ para sistemas embarcados</span></strong><span>, mas com adaptações devido às restrições de </span><strong><span>RAM, processamento e armazenamento</span></strong><span>. Abaixo, listo as </span><strong><span>referências mais citadas</span></strong><span> e como adaptar essas práticas para ambientes de baixo recurso.</span></p><hr /><h2><a name="1-princípios-adaptados-para-embarcados" class="md-header-anchor"></a><span>1. Princípios Adaptados para Embarcados</span></h2><h3><a name="a-clean-code-em-embarcados-cc" class="md-header-anchor"></a><span>A. </span><strong><span>Clean Code em Embarcados (C/C++)</span></strong></h3><ol start='' ><li><p><strong><span>Funções pequenas e legíveis</span></strong><span>  </span></p><ul><li><p><span>Mantenha </span><mark><span>funções curtas (&lt; 20 linhas)</span></mark><span> para facilitar depuração em sistemas limitados.  </span></p></li><li><p><span>Exemplo:  </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Ruim (função longa)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">processSensorData</span>() { <span class="cm-comment">/* 100+ linhas */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Bom (dividido)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">readSensor</span>() { <span class="cm-comment">/* ... */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">filterData</span>() { <span class="cm-comment">/* ... */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">sendToCAN</span>() { <span class="cm-comment">/* ... */</span> }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 133px;"></div><div class="CodeMirror-gutters" style="display: none; height: 133px;"></div></div></div></pre></li></ul></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2. **Evite alocação dinâmica** &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - Use buffers estáticos ou pools de memória pré-alocados. &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- Referência: *"Embedded C Coding Standard"* (Barr Group). &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3. **Macros vs. Funções inline** &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - Prefira `inline` ou macros para otimização, mas sem sacrificar legibilidade. &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">### **B. Object Calisthenics Adaptado**</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1. **Regra: "Nenhuma classe com &gt;2 variáveis de instância"** &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - Em C, use `structs` pequenas (ex: `struct Sensor { int value; bool valid; }`). &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2. **Regra: "Não use `else`"** &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - Substitua por *early returns* ou máquinas de estado (`switch-case`). &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3. **Regra: "Encapsule primitivos"** &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - Em C, use `typedef` para dar semântica (ex: `typedef uint32_t speed_mps_t`). &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">---</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">## 2. Referências para Embarcados</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">### Livros</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1. **"Test-Driven Development for Embedded C"** (James W. Grenning, 2011) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **ISBN**: 978-1934356623 &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Foco**: Clean Code + TDD em sistemas embarcados. &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2. **"Embedded C Coding Standard"** (Barr Group, 2018) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Link**: [Barr Group](https://barrgroup.com/embedded-systems/books/embedded-c-coding-standard) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Foco**: Boas práticas para evitar bugs críticos. &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3. **"Making Embedded Systems"** (Elecia White, 2011) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **ISBN**: 978-1449302146 &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Foco**: Design limpo para microcontroladores. &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">### Artigos e Guias Online</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1. **NASA C Coding Standard** &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Link**: [NASA JPL Power of 10](https://en.wikipedia.org/wiki/The_Power_of_10:_Rules_for_Developing_Safety-Critical_Code) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Regras**: Evite recursão, limite complexidade, use asserts. &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2. **MISRA C/C++** (Padrão industrial para segurança crítica) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Link**: [MISRA](https://www.misra.org.uk/) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Foco**: Restrições para código previsível (ex: sem `goto`). &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3. **"Embedded Systems Best Practices"** (ARM Developer) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; - **Link**: [ARM Keil](https://developer.arm.com/documentation/ka003660/latest) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">---</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">## 3. **Exemplo Prático** (C para Embarcados)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">### Antes (Código Não Otimizado)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">```c</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// Função confusa e alocação dinâmica</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">float* readSensors(int* count) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  float* data = malloc(10 * sizeof(float));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  // Lógica complexa aqui...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  return data; // Risco de vazamento!</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1197px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1197px;"></div></div></div></pre><h3><a name="depois-clean-code--embarcados" class="md-header-anchor"></a><span>Depois (Clean Code + Embarcados)</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Buffer estático (sem malloc)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define MAX_SENSORS 10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">float</span> <span class="cm-variable">sensorData</span>[<span class="cm-variable">MAX_SENSORS</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Função pequena e previsível</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">readSensors</span>(<span class="cm-variable-3">float*</span> <span class="cm-variable">output</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">max_size</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">max_size</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">MAX_SENSORS</span>) <span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">MAX_SENSORS</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">output</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">readADC</span>(<span class="cm-variable">i</span>); <span class="cm-comment">// Exemplo simples</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 228px;"></div><div class="CodeMirror-gutters" style="display: none; height: 228px;"></div></div></div></pre><p><strong><span>Melhorias</span></strong><span>:  </span></p><ul><li><span>Sem alocação dinâmica.  </span></li><li><span>Retorno booleano para erro.  </span></li><li><span>Legibilidade superior.  </span></li></ul><hr /><h2><a name="4-ferramentas-para-embarcados" class="md-header-anchor"></a><strong><span>4. Ferramentas para Embarcados</span></strong></h2><ol start='' ><li><p><strong><span>Cppcheck</span></strong><span>  </span></p><ul><li><span>Verificador estático para C/C++ em sistemas limitados.  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='http://cppcheck.sourceforge.net/'><span>Cppcheck</span></a><span>  </span></li></ul></li><li><p><strong><span>PVS-Studio</span></strong><span>  </span></p><ul><li><span>Analisa código C/C++ para bugs críticos.  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://pvs-studio.com/en/'><span>PVS-Studio</span></a><span>  </span></li></ul></li><li><p><strong><span>FreeRTOS Best Practices</span></strong><span>  </span></p><ul><li><span>Guia para sistemas RTOS.  </span></li><li><strong><span>Link</span></strong><span>: </span><a href='https://www.freertos.org/implementation/a00002.html'><span>FreeRTOS</span></a><span>  </span></li></ul></li></ol><hr /><h2><a name="resumo-n1459" class="md-header-anchor"></a><span>Resumo</span></h2><ul><li><p><strong><span>Clean Code e Object Calisthenics</span></strong><span> são viáveis em embarcados, mas com ajustes:  </span></p><ul><li><span>Evite alocação dinâmica.  </span></li><li><span>Prefira código estático e previsível.  </span></li><li><span>Use padrões como </span><strong><span>MISRA C</span></strong><span> ou </span><strong><span>Barr Group</span></strong><span>.  </span></li></ul></li><li><p><strong><span>Referências-chave</span></strong><span>:  </span></p><ul><li><em><span>&quot;Embedded C Coding Standard&quot;</span></em><span> (Barr Group).  </span></li><li><em><span>&quot;Making Embedded Systems&quot;</span></em><span> (Elecia White).  </span></li><li><strong><span>NASA JPL Power of 10</span></strong><span>.  </span></li></ul></li></ul><hr /><h2><a name="exemplo-de-máquina-de-estados-sem-else" class="md-header-anchor"></a><span>Exemplo de </span><strong><span>máquina de estados sem </span><code>else</code></strong></h2><p><span>Segue um </span><strong><span>exemplo prático de máquina de estados (FSM - Finite State Machine)</span></strong><span> em </span><strong><span>C para sistemas embarcados</span></strong><span>, substituindo condicionais aninhadas (</span><code>if/else</code><span> ou </span><code>switch-case</code><span>) por uma implementação mais limpa e eficiente, seguindo os princípios de </span><strong><span>Clean Code</span></strong><span> e </span><strong><span>Object Calisthenics</span></strong><span>:</span></p><hr /><h3><a name="cenário-controlador-de-motor-dc-com-3-estados" class="md-header-anchor"></a><span>Cenário: </span><strong><span>Controlador de Motor DC com 3 Estados</span></strong></h3><ol start='' ><li><strong><code>IDLE</code></strong><span>: Motor parado.  </span></li><li><strong><code>ACCELERATING</code></strong><span>: Motor acelerando até a velocidade desejada.  </span></li><li><strong><code>RUNNING</code></strong><span>: Motor em velocidade constante.  </span></li></ol><hr /><h3><a name="versão-ruim-com-ifelse-aninhados" class="md-header-anchor"></a><span>Versão Ruim (Com </span><code>if/else</code><span> Aninhados)</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Código confuso e difícil de manter</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">updateMotorState</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">speed</span>, <span class="cm-variable-3">bool</span> <span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">speed</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TARGET_SPEED</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Acelerando...\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">setPWM</span>(<span class="cm-variable">speed</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Velocidade constante.\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">setPWM</span>(<span class="cm-variable">TARGET_SPEED</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Motor desligado.\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">setPWM</span>(<span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 285px;"></div><div class="CodeMirror-gutters" style="display: none; height: 285px;"></div></div></div></pre><p><strong><span>Problemas</span></strong><span>:  </span></p><ul><li><span>Níveis de aninhamento dificultam a leitura.  </span></li><li><span>Frágil para adicionar novos estados.  </span></li></ul><hr /><h3><a name="versão-refatorada-máquina-de-estados-sem-else" class="md-header-anchor"></a><span>Versão Refatorada (Máquina de Estados sem </span><code>else</code><span>)</span></h3><h4><a name="passo-1-definir-os-estados" class="md-header-anchor"></a><span>Passo 1: </span><strong><span>Definir os Estados</span></strong></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">enum</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">STATE_IDLE</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">STATE_ACCELERATING</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">STATE_RUNNING</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">MotorState</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable">MotorState</span> <span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_IDLE</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 133px;"></div><div class="CodeMirror-gutters" style="display: none; height: 133px;"></div></div></div></pre><h4><a name="passo-2-implementar-transições-sem-else" class="md-header-anchor"></a><span>Passo 2: Implementar </span><strong><span>Transições sem </span><code>else</code></strong></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">updateMotorState</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">speed</span>, <span class="cm-variable-3">bool</span> <span class="cm-variable">isEnabled</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">switch</span> (<span class="cm-variable">currentState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">STATE_IDLE</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_ACCELERATING</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Iniciando aceleração.\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">STATE_ACCELERATING</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_IDLE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Parando motor.\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">speed</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">TARGET_SPEED</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_RUNNING</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Velocidade alcançada.\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">setPWM</span>(<span class="cm-variable">speed</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">STATE_RUNNING</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_IDLE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"Parando motor.\n"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">setPWM</span>(<span class="cm-variable">TARGET_SPEED</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 589px;"></div><div class="CodeMirror-gutters" style="display: none; height: 589px;"></div></div></div></pre><p><strong><span>Vantagens</span></strong><span>:  </span></p><ul><li><span>Elimina </span><code>else</code><span> desnecessários.  </span></li><li><span>Transições explícitas entre estados.  </span></li><li><span>Fácil adicionar novos estados (ex: </span><code>STATE_ERROR</code><span>).  </span></li></ul><hr /><h3><a name="versão-com-table-driven-fsm-avançado" class="md-header-anchor"></a><span>Versão com </span><strong><span>Table-Driven FSM (Avançado)</span></strong></h3><p><span>Para sistemas mais complexos, use uma </span><strong><span>tabela de transições</span></strong><span>:</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable-3">void</span> (<span class="cm-operator">*</span><span class="cm-variable">StateHandler</span>)(<span class="cm-variable-3">int</span>, <span class="cm-variable-3">bool</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">struct</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">MotorState</span> <span class="cm-variable">state</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">StateHandler</span> <span class="cm-variable">handler</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">StateTransition</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Handlers para cada estado</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">handleIdle</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">speed</span>, <span class="cm-variable-3">bool</span> <span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">isEnabled</span>) <span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_ACCELERATING</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">handleAccelerating</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">speed</span>, <span class="cm-variable-3">bool</span> <span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">isEnabled</span>) <span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_IDLE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">speed</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">TARGET_SPEED</span>) <span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_RUNNING</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-variable">setPWM</span>(<span class="cm-variable">speed</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Tabela de transições</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">StateTransition</span> <span class="cm-variable">transitions</span>[] <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {<span class="cm-variable">STATE_IDLE</span>, <span class="cm-variable">handleIdle</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {<span class="cm-variable">STATE_ACCELERATING</span>, <span class="cm-variable">handleAccelerating</span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">updateMotorState</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">speed</span>, <span class="cm-variable-3">bool</span> <span class="cm-variable">isEnabled</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-keyword">sizeof</span>(<span class="cm-variable">transitions</span>)<span class="cm-operator">/</span><span class="cm-keyword">sizeof</span>(<span class="cm-variable">transitions</span>[<span class="cm-number">0</span>]); <span class="cm-variable">i</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">transitions</span>[<span class="cm-variable">i</span>].<span class="cm-variable">state</span> <span class="cm-operator">==</span> <span class="cm-variable">currentState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">transitions</span>[<span class="cm-variable">i</span>].<span class="cm-variable">handler</span>(<span class="cm-variable">speed</span>, <span class="cm-variable">isEnabled</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 627px;"></div><div class="CodeMirror-gutters" style="display: none; height: 627px;"></div></div></div></pre><p><strong><span>Vantagens</span></strong><span>:  </span></p><ul><li><span>Separa lógica de estados em funções isoladas.  </span></li><li><span>Tabela centralizada facilita manutenção.  </span></li></ul><hr /><h3><a name="quando-usar-n1525" class="md-header-anchor"></a><span>Quando Usar?</span></h3><ol start='' ><li><strong><span>Sistemas embarcados com RTOS</span></strong><span> (ex: FreeRTOS).  </span></li><li><strong><span>Protocolos de comunicação</span></strong><span> (ex: UART, CAN).  </span></li><li><strong><span>Controle de hardware</span></strong><span> (ex: motores, sensores).  </span></li></ol><hr /><h3><a name="referências-n1534" class="md-header-anchor"></a><strong><span>Referências</span></strong><span> </span></h3><p><span>Para Máquinas de Estados em Embarcados:</span></p><ol start='' ><li><p><strong><span>&quot;Practical Statecharts in C/C++&quot;</span></strong><span> (Miro Samek, 2002)  </span></p><ul><li><strong><span>ISBN</span></strong><span>: 978-1578201105  </span></li><li><strong><span>Foco</span></strong><span>: FSMs para sistemas embarcados.  </span></li></ul></li><li><p><strong><span>Artigo: &quot;State Machines for Event-Driven Systems&quot;</span></strong><span> (Embedded.com)  </span></p><ul><li><strong><span>Link</span></strong><span>: </span><a href='https://www.embedded.com/state-machines-for-event-driven-systems/'><span>Embedded.com</span></a><span>  </span></li></ul></li><li><p><strong><span>MISRA C Guidelines</span></strong><span> (Regra 15.1: Evite </span><code>switch</code><span> aninhados)  </span></p><ul><li><strong><span>Link</span></strong><span>: </span><a href='https://www.misra.org.uk/'><span>MISRA C</span></a><span>  </span></li></ul></li></ol><hr /><h3><a name="exemplo-no-mundo-real" class="md-header-anchor"></a><span>Exemplo no Mundo Real</span></h3><ul><li><strong><span>Sistema de freio ABS</span></strong><span>: Estados como </span><code>IDLE</code><span>, </span><code>BRAKING</code><span>, </span><code>PUMPING</code><span>.  </span></li><li><strong><span>Leitor de cartão SD</span></strong><span>: Estados como </span><code>INIT</code><span>, </span><code>READING</code><span>, </span><code>ERROR</code><span>.  </span></li></ul><hr /><h2><a name="exemplo-para-stm32" class="md-header-anchor"></a><strong><span>Exemplo para STM32</span></strong></h2><p><span>Segue um exemplo com </span><strong><span>hardware real</span></strong><span> (ex: STM32 + PWM)...</span></p><p><span>Aqui está um </span><strong><span>exemplo completo de máquina de estados (FSM)</span></strong><span> para controlar um </span><strong><span>motor DC com PWM</span></strong><span> em uma placa </span><strong><span>STM32</span></strong><span> (usando HAL e CubeMX), seguindo princípios de </span><strong><span>Clean Code</span></strong><span> e sem </span><code>else</code><span> desnecessários:</span></p><hr /><h3><a name="hardware-utilizado" class="md-header-anchor"></a><span>Hardware Utilizado</span></h3><ul><li><p><strong><span>Placa</span></strong><span>: STM32F4 Discovery (ou qualquer STM32 com timer PWM).</span></p></li><li><p><strong><span>Periféricos</span></strong><span>: </span></p><ul><li><strong><span>Timer 3 (PWM)</span></strong><span>: Para controle de velocidade do motor.</span></li><li><strong><span>GPIO</span></strong><span>: Botão para ligar/desligar (PC13, por exemplo).</span></li><li><strong><span>ADC</span></strong><span>: Leitura de sensor de velocidade (opcional).</span></li></ul></li></ul><hr /><h3><a name="1-definindo-os-estados-e-hardware-cubemx" class="md-header-anchor"></a><span>1. Definindo os Estados e Hardware (</span><strong><span>CubeMX</span></strong><span>)</span></h3><h4><a name="configuração-do-pwm-cubemx" class="md-header-anchor"></a><span>Configuração do PWM (CubeMX)</span></h4><ol start='' ><li><p><span>Abra o CubeMX e selecione um timer (ex: TIM3).</span></p></li><li><p><span>Ative um canal PWM (ex: TIM3_CH1 em PB4).</span></p></li><li><p><span>Configure:</span></p><ul><li><strong><span>Prescaler</span></strong><span>: 0.</span></li><li><strong><span>Counter Period</span></strong><span>: 1000 (para PWM de 10 bits).</span></li></ul></li></ol><h4><a name="código-estados-e-inicialização" class="md-header-anchor"></a><span>Código: Estados e Inicialização</span></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// --- states.h ---</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">enum</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">STATE_IDLE</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">STATE_ACCELERATING</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">STATE_RUNNING</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">MotorState</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Protótipos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">FSM_Init</span>(<span class="cm-variable-3">void</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">FSM_Update</span>(<span class="cm-variable-3">void</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// --- main.c ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include "states.h"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include "stm32f4xx_hal.h"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Variáveis globais</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">MotorState</span> <span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_IDLE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">TIM_HandleTypeDef</span> <span class="cm-variable">htim3</span>; &nbsp;<span class="cm-comment">// Timer do PWM</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint16_t</span> <span class="cm-variable">currentSpeed</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable-3">uint16_t</span> <span class="cm-variable">TARGET_SPEED</span> <span class="cm-operator">=</span> <span class="cm-number">900</span>; &nbsp;<span class="cm-comment">// Valor PWM máximo (ex: 90% duty cycle)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Handler do botão (interrupção ou polling)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">HAL_GPIO_EXTI_Callback</span>(<span class="cm-variable-3">uint16_t</span> <span class="cm-variable">GPIO_Pin</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">GPIO_Pin</span> <span class="cm-operator">==</span> <span class="cm-variable">GPIO_PIN_13</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentState</span> <span class="cm-operator">=</span> (<span class="cm-variable">currentState</span> <span class="cm-operator">==</span> <span class="cm-variable">STATE_IDLE</span>) <span class="cm-operator">?</span> <span class="cm-variable">STATE_ACCELERATING</span> : <span class="cm-variable">STATE_IDLE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 513px;"></div><div class="CodeMirror-gutters" style="display: none; height: 513px;"></div></div></div></pre><hr /><h3><a name="2-máquina-de-estados-sem-else" class="md-header-anchor"></a><span>2. Máquina de Estados sem </span><code>else</code></h3><h4><a name="implementação-da-fsm" class="md-header-anchor"></a><strong><span>Implementação da FSM</span></strong></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// --- states.c ---</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include "states.h"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;stdio.h&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">FSM_Init</span>(<span class="cm-variable-3">void</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">HAL_TIM_PWM_Start</span>(<span class="cm-operator">&amp;</span><span class="cm-variable">htim3</span>, <span class="cm-variable">TIM_CHANNEL_1</span>); &nbsp;<span class="cm-comment">// Inicia PWM</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">__HAL_TIM_SET_COMPARE</span>(<span class="cm-operator">&amp;</span><span class="cm-variable">htim3</span>, <span class="cm-variable">TIM_CHANNEL_1</span>, <span class="cm-number">0</span>); &nbsp;<span class="cm-comment">// Duty cycle = 0%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">FSM_Update</span>(<span class="cm-variable-3">void</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">switch</span> (<span class="cm-variable">currentState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">STATE_IDLE</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">__HAL_TIM_SET_COMPARE</span>(<span class="cm-operator">&amp;</span><span class="cm-variable">htim3</span>, <span class="cm-variable">TIM_CHANNEL_1</span>, <span class="cm-number">0</span>); &nbsp;<span class="cm-comment">// Motor desligado</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">STATE_ACCELERATING</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentSpeed</span> <span class="cm-operator">+=</span> <span class="cm-number">10</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">__HAL_TIM_SET_COMPARE</span>(<span class="cm-operator">&amp;</span><span class="cm-variable">htim3</span>, <span class="cm-variable">TIM_CHANNEL_1</span>, <span class="cm-variable">currentSpeed</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">currentSpeed</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">TARGET_SPEED</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentState</span> <span class="cm-operator">=</span> <span class="cm-variable">STATE_RUNNING</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">STATE_RUNNING</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Mantém a velocidade constante</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">__HAL_TIM_SET_COMPARE</span>(<span class="cm-operator">&amp;</span><span class="cm-variable">htim3</span>, <span class="cm-variable">TIM_CHANNEL_1</span>, <span class="cm-variable">TARGET_SPEED</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 570px;"></div><div class="CodeMirror-gutters" style="display: none; height: 570px;"></div></div></div></pre><hr /><h3><a name="3-loop-principal-mainc" class="md-header-anchor"></a><span>3. Loop Principal (main.c)</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>(<span class="cm-variable-3">void</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">HAL_Init</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">SystemClock_Config</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">MX_GPIO_Init</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">MX_TIM3_Init</span>(); &nbsp;<span class="cm-comment">// Configura PWM via CubeMX</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">FSM_Init</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">while</span> (<span class="cm-number">1</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">FSM_Update</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">HAL_Delay</span>(<span class="cm-number">100</span>); &nbsp;<span class="cm-comment">// Atualiza a cada 100ms</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 247px;"></div><div class="CodeMirror-gutters" style="display: none; height: 247px;"></div></div></div></pre><hr /><h3><a name="4-explicação-das-melhorias" class="md-header-anchor"></a><span>4. Explicação das Melhorias</span></h3><ol start='' ><li><p><strong><span>Sem </span><code>else</code></strong><span>:  </span></p><ul><li><span>Transições são tratadas diretamente nos </span><code>if</code><span> dos estados.  </span></li><li><span>Exemplo: Em </span><code>STATE_ACCELERATING</code><span>, a mudança para </span><code>STATE_RUNNING</code><span> ocorre sem </span><code>else</code><span>.  </span></li></ul></li><li><p><strong><span>Baixo Acoplamento</span></strong><span>:  </span></p><ul><li><span>A lógica de cada estado está isolada.  </span></li></ul></li><li><p><strong><span>Eficiência em Embarcados</span></strong><span>:  </span></p><ul><li><span>Sem alocação dinâmica.  </span></li><li><span>PWM controlado diretamente pelo hardware.  </span></li></ul></li></ol><hr /><h3><a name="5-teste-no-hardware-real" class="md-header-anchor"></a><span>5. Teste no Hardware Real</span></h3><ol start='' ><li><p><span>Conecte um motor DC ao </span><strong><span>PB4</span></strong><span> (saída PWM) e um botão em </span><strong><span>PC13</span></strong><span>.  </span></p></li><li><p><span>Ao pressionar o botão:  </span></p><ul><li><span>O motor acelera suavemente até a velocidade máxima.  </span></li><li><span>Pressione novamente para voltar ao estado </span><code>IDLE</code><span>.  </span></li></ul></li></ol><hr /><h3><a name="referências-para-stm32" class="md-header-anchor"></a><strong><span>Referências para STM32</span></strong></h3><ol start='' ><li><strong><span>Manual do PWM no STM32 (AN4776)</span></strong><span>:  </span></li></ol><ul><li><a href='https://www.st.com/resource/en/application_note/an4776-pwm-generation-using-stm32f4xx-timers-stmicroelectronics.pdf'><span>Documentação ST</span></a><span>  </span></li></ul><ol start='2' ><li><strong><span>Projeto no GitHub</span></strong><span>:  </span></li></ol><ul><li><span>Exemplo completo: </span><a href='https://github.com/STM32-Projects/STM32-Motor-Control-FSM'><span>STM32 Motor Control FSM</span></a><span>  </span></li></ul><ol start='3' ><li><p><strong><span>Livro: &quot;Mastering STM32&quot; (Carmine Noviello)</span></strong><span>:</span></p><p><em><span>A step-by-step guide to the most complete ARM Cortex-M platform, using the official STM32Cube development environment.</span></em></p><ul><li><strong><span>ISBN</span></strong><span>: 978-1082407627, 2018</span></li><li><a href='https://leanpub.com/mastering-stm32-2nd'><span>2nd Edition</span></a><span>, 2022.</span></li></ul></li></ol><hr /><h3><a name="próximos-passos-" class="md-header-anchor"></a><span>Próximos Passos ?</span></h3><ul><li><span>Adicione um </span><strong><span>ADC</span></strong><span> para ler a velocidade real do motor.  </span></li><li><span>Implemente um </span><strong><span>PID controller</span></strong><span> dentro da FSM.  </span></li><li><span>Use </span><strong><span>FreeRTOS</span></strong><span> para multitarefa (ex: uma task para a FSM).  </span></li></ul><hr /><p><span>Fernando Passold, 02/05/2025</span></p><p>&nbsp;</p></div>
</body>
</html>