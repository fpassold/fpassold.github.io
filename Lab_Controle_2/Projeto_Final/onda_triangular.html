<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>onda_triangular.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF);background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:5px -27px no-repeat #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:#FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:#EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:#75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:1px solid #1A3C6C;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin:0;max-width:none;min-height:0;outline:#112644 0;overflow-x:visible;overflow-y:visible;padding:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}.mermaid .label{color:#333}.node circle,.node polygon,.node rect{fill:#cde498;stroke:#13540c;stroke-width:1px}.edgePath .path{stroke:green;stroke-width:1.5px}.cluster rect{fill:#cdffb2;rx:40;stroke:#6eaa49;stroke-width:1px}.cluster text{fill:#333}.actor{stroke:#13540c;fill:#cde498}text.actor{fill:#000;stroke:none}.actor-line{stroke:grey}.messageLine0{stroke-width:1.5;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#333}.messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#arrowhead{fill:#333}#crosshead path{fill:#333!important;stroke:#333!important}.messageText{fill:#333;stroke:none}.labelBox{stroke:#326932;fill:#cde498}.labelText,.loopText{fill:#000;stroke:none}.loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#326932}.note{stroke:#6eaa49;fill:#fff5ad}.noteText{fill:#000;stroke:none;font-family:'trebuchet ms',verdana,arial;font-size:14px}.section{stroke:none;opacity:.2}.section0,.section2{fill:#6eaa49}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:#333}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:lightgrey;opacity:.3;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:red;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle;font-size:11px}.taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:#487e3a;stroke:#13540c}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:#000}.active0,.active1,.active2,.active3{fill:#cde498;stroke:#13540c}.activeText0,.activeText1,.activeText2,.activeText3{fill:#000!important}.done0,.done1,.done2,.done3{stroke:grey;fill:lightgrey;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:#000!important}.crit0,.crit1,.crit2,.crit3{stroke:#f88;fill:red;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#f88;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:#000!important}.titleText{text-anchor:middle;font-size:18px;fill:#000}text{font-family:'trebuchet ms',verdana,arial;font-size:14px}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x;border:0;height:3px;padding:0}hr.underscore{border-top-style:dashed!important}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:url(../img/ajax.gif) center center no-repeat #fff}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"• "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}input.task-list-item{margin-left:-1.62em}.markdown{font-family:"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",'Segoe UI',AppleSDGothicNeo-Medium,'Malgun Gothic',Verdana,Tahoma,sans-serif;padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-wrap:break-word}.markdown pre{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;overflow:auto;padding:.5em}.markdown pre code{border:0;display:block}.markdown pre>code{font-family:Consolas,Inconsolata,Courier,monospace;font-weight:700;white-space:pre;margin:0}.markdown code{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown mark{color:#000;background-color:#fcf8e3}.markdown table{padding:0;border-collapse:collapse;border-spacing:0;margin-bottom:16px}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.clearness{padding:20px;color:#737373;font-size:15px;background:#fff;-webkit-font-smoothing:antialiased}.clearness a{color:#1e6ea7}.clearness a:hover{color:#268bd2}.clearness h1,.clearness h2,.clearness h3,.clearness h4,.clearness h5{color:#404040}.clearness h2{border-bottom:1px solid #ccc;line-height:1.7em}.clearness h6{color:#666}.clearness hr{border:1px solid #e6e6e6}.clearness pre>code{font-size:.9em}.clearness blockquote{padding:0 15px;font-style:italic}.clearness blockquote:before{content:"\201C";font-size:40px;margin-left:-20px;color:#aaa}.clearness table{background-color:#fff;border-collapse:separate;border-spacing:2px}.clearness table tr td,.clearness table tr th{border:0;padding:.2em 1em}.clearness table tr th{border-bottom:1px solid #bfbfbf}.clearness table tr td{border-bottom:1px solid #d9d9d9}.clearness table tr:nth-child(2n){background-color:#fff}.hljs{display:block;overflow-x:auto;padding:.5em;background:#fff;color:#000;-webkit-text-size-adjust:none}.apache .hljs-cbracket,.diff .hljs-header,.hljs-annotation,.hljs-chunk,.hljs-comment{color:green}.bash .hljs-variable,.css .smalltalk .hljs-class,.hljs-built_in,.hljs-id,.hljs-keyword,.hljs-request,.hljs-status,.hljs-winutils,.nginx .hljs-title,.tex .hljs-command,.xml .hljs-tag,.xml .hljs-tag .hljs-value{color:#00f}.apache .hljs-tag,.coffeescript .hljs-attribute,.django .hljs-variable,.hljs-addition,.hljs-date,.hljs-flow,.hljs-parent,.hljs-rules .hljs-value,.hljs-stream,.hljs-string,.hljs-tag .hljs-value,.hljs-template_tag,.hljs-title,.ruby .hljs-symbol,.ruby .hljs-symbol .hljs-string,.tex .hljs-formula{color:#a31515}.apache .hljs-sqbracket,.hljs-array,.hljs-attr_selector,.hljs-decorator,.hljs-deletion,.hljs-doctype,.hljs-envvar,.hljs-filter .hljs-argument,.hljs-localvars,.hljs-pi,.hljs-pragma,.hljs-preprocessor,.hljs-prompt,.hljs-pseudo,.hljs-shebang,.nginx .hljs-built_in,.ruby .hljs-string,.tex .hljs-special,.userType{color:#2b91af}.hljs-dartdoc,.hljs-javadoc,.hljs-phpdoc,.hljs-xmlDocTag{color:gray}.hljs-type,.hljs-typename{font-weight:700}.vhdl .hljs-string{color:#666}.vhdl .hljs-literal{color:#a31515}.vhdl .hljs-attribute{color:#00b0e8}.xml .hljs-attribute{color:red}.MathJax_Hover_Frame{border-radius:.25em;-webkit-border-radius:.25em;-moz-border-radius:.25em;-khtml-border-radius:.25em;box-shadow:0 0 15px #83A;-webkit-box-shadow:0 0 15px #83A;-moz-box-shadow:0 0 15px #83A;-khtml-box-shadow:0 0 15px #83A;border:1px solid #A6D!important;display:inline-block;position:absolute}.MathJax_Hover_Arrow{position:absolute;width:15px;height:11px;cursor:pointer}#MathJax_About{position:fixed;left:50%;width:auto;text-align:center;border:3px outset;padding:1em 2em;background-color:#DDD;color:#000;cursor:default;font-family:message-box;font-size:120%;font-style:normal;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:15px;-webkit-border-radius:15px;-moz-border-radius:15px;-khtml-border-radius:15px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_Menu{position:absolute;background-color:#fff;color:#000;width:auto;padding:2px;border:1px solid #CCC;margin:0;cursor:default;font:menu;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_MenuItem{padding:2px 2em;background:0 0}.MathJax_MenuArrow{position:absolute;right:.5em;color:#666}.MathJax_MenuActive .MathJax_MenuArrow{color:#fff}.MathJax_MenuArrow.RTL{left:.5em;right:auto}.MathJax_MenuCheck{position:absolute;left:.7em}.MathJax_MenuCheck.RTL{right:.7em;left:auto}.MathJax_MenuRadioCheck{position:absolute;left:1em}.MathJax_MenuRadioCheck.RTL{right:1em;left:auto}.MathJax_MenuLabel{padding:2px 2em 4px 1.33em;font-style:italic}.MathJax_MenuRule{border-top:1px solid #CCC;margin:4px 1px 0}.MathJax_MenuDisabled{color:GrayText}.MathJax_MenuActive{background-color:Highlight;color:HighlightText}.MathJax_Menu_Close{position:absolute;width:31px;height:31px;top:-15px;left:-15px}#MathJax_Zoom{position:absolute;background-color:#F0F0F0;overflow:auto;display:block;z-index:301;padding:.5em;border:1px solid #000;margin:0;font-weight:400;font-style:normal;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;box-shadow:5px 5px 15px #AAA;-webkit-box-shadow:5px 5px 15px #AAA;-moz-box-shadow:5px 5px 15px #AAA;-khtml-box-shadow:5px 5px 15px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_ZoomOverlay{position:absolute;left:0;top:0;z-index:300;display:inline-block;width:100%;height:100%;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_ZoomFrame{position:relative;display:inline-block;height:0;width:0}#MathJax_ZoomEventTrap{position:absolute;left:0;top:0;z-index:302;display:inline-block;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}.MathJax_Preview{color:#888}#MathJax_Message{position:fixed;left:1px;bottom:2px;background-color:#E6E6E6;border:1px solid #959595;margin:0;padding:2px 8px;z-index:102;color:#000;font-size:80%;width:auto;white-space:nowrap}#MathJax_MSIE_Frame{position:absolute;top:0;left:0;width:0;z-index:101;border:0;margin:0;padding:0}.MathJax_Error{color:#C00;font-style:italic}.MathJax_Display{text-align:center;margin:1em 0;position:relative;display:block!important;text-indent:0;max-width:none;max-height:none;min-width:0;min-height:0;width:100%}.MathJax .merror{background-color:#FF8;color:#C00;border:1px solid #C00;padding:1px 3px;font-style:normal;font-size:90%}.MathJax .MJX-monospace{font-family:monospace}.MathJax .MJX-sans-serif{font-family:sans-serif}#MathJax_Tooltip{background-color:InfoBackground;color:InfoText;border:1px solid #000;box-shadow:2px 2px 5px #AAA;-webkit-box-shadow:2px 2px 5px #AAA;-moz-box-shadow:2px 2px 5px #AAA;-khtml-box-shadow:2px 2px 5px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true');padding:3px 4px;z-index:401;position:absolute;left:0;top:0;width:auto;height:auto;display:none}.MathJax{display:inline;font-style:normal;font-weight:400;line-height:normal;font-size:100%;font-size-adjust:none;text-indent:0;text-align:left;text-transform:none;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;direction:ltr;max-width:none;max-height:none;min-width:0;min-height:0;border:0;padding:0;margin:0}.MathJax a,.MathJax img,.MathJax nobr{border:0;padding:0;margin:0;max-width:5000em;max-height:5000em;min-width:0;min-height:0;vertical-align:0;line-height:normal;text-decoration:none}img.MathJax_strut{border:0!important;padding:0!important;margin:0!important;vertical-align:0!important}.MathJax span{display:inline;position:static;border:0;padding:0;margin:0;vertical-align:0;line-height:normal;text-decoration:none}.MathJax nobr{white-space:nowrap!important}.MathJax img{display:inline!important;float:none!important}.MathJax *{transition:none;-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none}.MathJax_Processing{visibility:hidden;position:fixed;width:0;height:0;overflow:hidden}.MathJax_Processed{display:none!important}.MathJax_ExBox{display:block!important;overflow:hidden;width:1px;height:60ex;min-height:0;max-height:none}.MathJax .MathJax_EmBox{display:block!important;overflow:hidden;width:1px;height:60em;min-height:0;max-height:none}.MathJax .MathJax_HitBox{cursor:text;background:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_Tooltip *,.MathJax .MathJax_HitBox *{filter:none;opacity:1;background:0 0}@font-face{font-family:MathJax_Main;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?rev=2.4-beta-2) format('opentype')}@font-face{font-family:MathJax_Main;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?rev=2.4-beta-2) format('opentype');font-weight:700}@font-face{font-family:MathJax_Main;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?rev=2.4-beta-2) format('opentype');font-style:italic}@font-face{font-family:MathJax_Math;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?rev=2.4-beta-2) format('opentype');font-style:italic}@font-face{font-family:MathJax_Caligraphic;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?rev=2.4-beta-2) format('opentype')}@font-face{font-family:MathJax_Size1;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?rev=2.4-beta-2) format('opentype')}@font-face{font-family:MathJax_Size2;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?rev=2.4-beta-2) format('opentype')}@font-face{font-family:MathJax_Size3;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?rev=2.4-beta-2) format('opentype')}@font-face{font-family:MathJax_Size4;src:url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?rev=2.4-beta-2) format('woff'),url(file:///C:/Users/fpassold/AppData/Haroopad/Libraries/.js/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?rev=2.4-beta-2) format('opentype')}.MathJax .noError{font-size:90%;text-align:left;color:#000;padding:1px 3px;border:1px solid}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown clearness">
<h1 id="projeto-final"><a name="projeto-final" href="#projeto-final"></a>Projeto Final</h1><h2 id="geração-onda-triangular-0,1-hz"><a name="geração-onda-triangular-0,1-hz" href="#geração-onda-triangular-0,1-hz"></a>Geração onda triangular 0,1 Hz</h2><p>A ideia agora é gerar uma onda triangular que leve 5 segundos para variar a tensão de 0 até 5 Volts e que gaste outros tantos segundos para reduzir a tensão novamente para 0 Volts, totalizando um ciclo de dura 10 segundos, resultando numa onda triangular de 0,1 Hz.</p><p><strong>Detalhe</strong>: um botão (push-button NA) deve permitir que o usuário escolha quando a onda varia sua amplitude. Ou seja, a cada vez que este botão é pressionado, a onda pode ser “pausada” ou retomada do ponto em que foi pausada.</p><p>Está previsto o uso de saída PWM filtrada do Arduíno para gerar uma tensão a mais próxima possível de um nível DC entre 0 à 5 Volts.</p><p>Para gerar a onda triangular foi previsto algo como:</p><p><img src="figuras/onda_triangular.drawio_red.png" alt="onda_triangular.drawio_red.png"></p><p>Do esboço anterior se infere que:</p><p><span class="MathJax_Preview"></span></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-1-Frame"><nobr><span class="math" id="MathJax-Span-1" style="width: 11.617em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.28em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.844em 1000em 3.085em -0.459em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-8" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">l</span><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-15" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Main; padding-left: 0.222em;">Δ</span><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math; font-style: italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.285em; vertical-align: -0.323em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">
new\_y = last\_y + \Delta v</script><p></p><p><span class="MathJax_Preview"></span></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-2-Frame"><nobr><span class="math" id="MathJax-Span-18" style="width: 10.75em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.587em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.844em 1000em 2.891em -0.434em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-19"><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Main; padding-left: 0.278em;">Δ</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-25" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">t</span><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-28" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-29" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-30" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-32" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math; font-style: italic;">r</span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.042em; vertical-align: -0.08em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">
\Delta v = \Delta t \cdot taxa \cdot dir</script><p></p><p><span class="MathJax_Preview"></span></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-3-Frame"><nobr><span class="math" id="MathJax-Span-34" style="width: 20.617em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.48em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.844em 1000em 3.074em -0.434em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-35"><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-37" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-38" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">c</span><span class="mi" id="MathJax-Span-40" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-42" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-43" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.081em;"></span></span><span class="mi" id="MathJax-Span-47" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-48" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-49" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mo" id="MathJax-Span-52" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">p</span><span class="mi" id="MathJax-Span-54" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-57" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.081em;"></span></span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-63" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-64" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.271em; vertical-align: -0.309em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-3">
\Delta t = currentMillis - previousMillis</script><p></p><p>e onde:</p><p><span class="MathJax_Preview"></span></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-4-Frame"><nobr><span class="math" id="MathJax-Span-67" style="width: 7.15em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.707em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.217em 1000em 3.588em -0.461em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-68"><span class="mi" id="MathJax-Span-69" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-70" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-71" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mstyle" id="MathJax-Span-74" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-75"><span class="mfrac" id="MathJax-Span-76"><span style="display: inline-block; position: relative; width: 2.147em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(1.894em 1000em 2.902em -0.43em); top: -3.397em; left: 50%; margin-left: -0.773em;"><span class="mn" id="MathJax-Span-77" style="font-family: MathJax_Main;">255</span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span><span style="position: absolute; clip: rect(1.894em 1000em 2.902em -0.43em); top: -2.034em; left: 50%; margin-left: -1.013em;"><span class="mn" id="MathJax-Span-78" style="font-family: MathJax_Main;">5000</span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span><span style="position: absolute; clip: rect(0.84em 1000em 1.227em -0.48em); top: -1.287em; left: 0em;"><span style="border-left-width: 2.147em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.067em;"></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 2.696em; vertical-align: -0.952em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-4">
taxa = \dfrac{255}{5000}</script><p></p><p>onde o valor 255 = 100% do PWM (ou % Volts) e o valor 5000 = T/2 (metade do período de tempo da onda, em milisegundos).</p><p>No momento de reiniciar a onda após um “pause”, é só fazer: <span><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-5-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-79" style="width: 17.617em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.08em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.866em 1000em 3.074em -0.519em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-80"><span class="mi" id="MathJax-Span-81" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-86" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-88" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-89" style="font-family: MathJax_Math; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.081em;"></span></span><span class="mi" id="MathJax-Span-90" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-92" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-93" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-94" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mo" id="MathJax-Span-95" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">c</span><span class="mi" id="MathJax-Span-97" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-101" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-103" style="font-family: MathJax_Math; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.081em;"></span></span><span class="mi" id="MathJax-Span-104" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-105" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-106" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.243em; vertical-align: -0.309em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">previousMillis = currentMillis</script></span> para que propositalmente <span><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-109" style="width: 3.817em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.04em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.844em 1000em 2.902em -0.434em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-110"><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-112" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-113" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-114" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.056em; vertical-align: -0.094em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">\Delta t = 0</script></span> e assim <span><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-7-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-115" style="width: 3.95em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.147em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.844em 1000em 2.902em -0.434em); top: -2.72em; left: 0em;"><span class="mrow" id="MathJax-Span-116"><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-118" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-120" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.72em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.056em; vertical-align: -0.094em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">\Delta v = 0</script></span>.</p><p>O código fica algo como:</p><pre class="cpp hljs"><code class="cpp" data-origin="<pre><code class=&quot;cpp&quot;>/***************************************************
 Teste do Serial Plotter da IDE 2.x com porta analógica

 Entrada analógica monitorada = A0
 botão para alternar entre geração/não de dados = pin 7, active LOW

 A própria placa gera onda trinagular com ciclo de 0,1 Hz com
 tensão (PWM filtrado) variando entre 0 à 5 Volts no pino 6

 Sugere-se curto-circuitar a saída filtrada do PWM (pino 6) com a
 entrada A0 do Arduino, para efeitos de teste.

 Fernando Passold, em 17/11/2022, 18/11/2022
 **************************************************/

#define pino_PWM 6      // pino da saída PWM (à ser filtrada)
#define pino_button 7   // pino onde está botão que alterna captura/não de dados
#define analog_pin A0   // entrada analógica usada
#define pino_led_satus   2    // led de &quot;status&quot;, active HIGH

#define freq 0.1                                // Freq da onda triangular em Hz
const float taxa = (255.0*2.0*freq)/1000.0;     // taxa de subida/descida da onda triangular (valor %PWM/ms)
// Exemplo: Se freq = 0,1 Hz, T=1/01=10 segundos
// metada do ciclo da triangular T/2 = 5 segundos = 5000 ms
// taxa = 255.0/5000.0 = 0.051;                 // onda triangular deve atingir 100% duty-cycle (255) em 5 seg (5000 ms)
// para uso posterior em equação como:
// new_y = last_y + taxa*delta_t*dir
// dir=+1,-1 para indicar subida ou descida da onda triangular
// delta_t = passagem de tempo entre um ponto e outro da onda gerada (valor em ms)

const float converte_duty2volts = 5.0/256.0;    // para converter duty-cycle 100% = 255
const float converte_AD2volts = 5.0/1024.0;     // para converter de 2^10 (1024) = 5 Volts

float analog_value;                       // Valor original do AD (int) convertido para tensão em Volts
unsigned long currentMillis = 0;          // &quot;tempo&quot; atual do sistema, t[k]
unsigned long previousMillis = 0;         // &quot;tempo&quot; na amostra anterior, t[k-1]
unsigned long time_pressed = 0;           // will store last time buttom was pressed
bool debouncing = false;                  // realizando debouncig ou não (habilita/desabilita leiutura chave)
const unsigned long time_debounce = 150;  // periodo de tempo para debouncing de chave (milisegundos)
unsigned long delta_t;                    // diferença de passagem de tempo
bool pause = false;                       // pausar ou não onda triangular
bool stop = false;                        // parar onda trinagular (e zerar saída analógica/PWM)
float new_y;                              // novo valor (valor atual) amplitude onda triangular, y[k] (entre 0 à 255)
float last_y;                             // valor amostra passada da amplitude da trinagular, y[k-1]
int dir = 1;                              // indica &quot;subida&quot;(+1) ou descida (-1) da onda triangular
float y_volts;                            // valor convertido para tensão (0 ~ 5 Volts)
bool serial_out = true;                   // indica quando &quot;imprimir&quot; ou não info na porta serial

void prepara_onda_triangular(){
  // prepara variáveis para iniciar onda do zero
  dir = 1; // onda subindo
  last_y = 0;
  new_y = 0;
  delta_t = 0;
  currentMillis = millis();
  previousMillis = currentMillis;
}

void update_led_status(){
  // sinaliza &quot;status&quot; do sistema
  if (pause)  {
    digitalWrite(pino_led_satus, LOW);
    Serial.println(&quot;pause:&quot;);
    serial_out = false;
  }
  if (!pause) {
    digitalWrite(pino_led_satus, HIGH);
    serial_out = true;
  } 
}

void update_triangular(){
  // calcula próximo valor da onda triangular, atualiza amostra passada
  delta_t = currentMillis - previousMillis; // calcula intervalo de tempo em comparação com amostra (ou pausa) anterior
  new_y = last_y + taxa*delta_t*dir;
  if (new_y&amp;gt;255)  {
    // momento de inverter ciclo da triangular, de subida para descida
    dir = -1;
    new_y = 255;
  }
  if (new_y&amp;lt;0)  {
    // momento de inverter ciclo da triangular, de descida para subida
    dir = +1;
    new_y = 0;
  }
  // joga valor calculado para &quot;fora&quot;
  analogWrite(pino_PWM, new_y);
  last_y = new_y;                       // deixa preparado para próximo ponto
  previousMillis = currentMillis;       // deixa pronto para cálculo do próximo ponto
  y_volts = new_y*converte_duty2volts; // converte ssaída duty-cycle para Volts (atualiza valor)
}

void setup() {
  // put your setup code here, to run once:
  pinMode(pino_button, INPUT);
  pinMode(pino_PWM, OUTPUT);
  pinMode(pino_led_satus, OUTPUT);
  digitalWrite(pino_led_satus, HIGH);
  Serial.begin(9600);
  delay(50);
  Serial.println(&quot;Teste do Serial Plotter&quot;);
  Serial.print(&quot;               freq=&quot;); Serial.println(freq);
  Serial.print(&quot;               taxa=&quot;); Serial.println(taxa*1000);
  Serial.print(&quot;converte_duty2volts=&quot;); Serial.println(converte_duty2volts*1000);
  Serial.print(&quot;  converte_AD2volts=&quot;); Serial.println(converte_AD2volts*1000);
  debouncing = false;
  pause = true;
  stop = false;
  prepara_onda_triangular();
  update_triangular();
  digitalWrite(pino_led_satus, LOW);
  update_led_status();
  serial_out = false;
}

void loop() {
  // put your main code here, to run repeatedly:
  currentMillis = millis();
  if (!debouncing) {
    if (digitalRead(pino_button) == LOW) {
      // deveria deixar passar uns 50 ~ 150 ms a titulo de debouncing do botão
      // não podemos usar delay(100) porque influencia função analogWrite() - gerador PWM &quot;interno&quot; do Arduino
      debouncing = true;
      time_pressed = millis();
      // antes de atualizar pause, verifica se onda triangular está sendo re-iniciada
      // pause --&amp;gt; !pause; deve então garantir delta_t = 0
      if (pause){
        previousMillis = currentMillis;  
      }
      // atualiza pause
      pause = !pause;  // simplesmente alterna estado
      update_led_status();
    }
  }
  if (debouncing) {
    // Significa que estamos dentro de periodo de debouncing em que a chave é ignorada
    // falta verificar se passou tempo para &quot;desligar&quot; o debouncing
    if (currentMillis - time_pressed &amp;gt;= time_debounce) {
      debouncing = false;  // habilita novas leituras do botão
    }
  }
  if (!pause) update_triangular(); 
  // lendo sinal analógico
  analog_value = converte_AD2volts*(float)analogRead(analog_pin);
  // if (serial_out){ // &amp;lt;-- imprime apenas fora do pause
    Serial.print(&quot;y_max:&quot;); Serial.print(5.5); // apenas &quot;traço superior&quot;
    Serial.print(&quot;\t&quot;);
    if (pause){
      Serial.print(&quot; P &quot;);
    }
    Serial.print(&quot;\t&quot;);
    Serial.print(&quot;delta_t:&quot;); Serial.print(delta_t/10.0);
    Serial.print(&quot;\t&quot;);
    Serial.print(&quot;yd:&quot;); Serial.print(y_volts);
    Serial.print(&quot;\t&quot;);
    Serial.print(&quot;y:&quot;); Serial.print(analog_value);
    Serial.print(&quot;\t&quot;);
    Serial.print(&quot;y_min:&quot;); Serial.println(-0.5); // apenas &quot;traço inferior&quot;
  // }
}
</code></pre>"><span class="hljs-comment">/***************************************************
 Teste do Serial Plotter da IDE 2.x com porta analógica

 Entrada analógica monitorada = A0
 botão para alternar entre geração/não de dados = pin 7, active LOW

 A própria placa gera onda trinagular com ciclo de 0,1 Hz com
 tensão (PWM filtrado) variando entre 0 à 5 Volts no pino 6

 Sugere-se curto-circuitar a saída filtrada do PWM (pino 6) com a
 entrada A0 do Arduino, para efeitos de teste.

 Fernando Passold, em 17/11/2022, 18/11/2022
 **************************************************/</span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pino_PWM 6      <span class="hljs-comment">// pino da saída PWM (à ser filtrada)</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pino_button 7   <span class="hljs-comment">// pino onde está botão que alterna captura/não de dados</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> analog_pin A0   <span class="hljs-comment">// entrada analógica usada</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pino_led_satus   2    <span class="hljs-comment">// led de "status", active HIGH</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> freq 0.1                                <span class="hljs-comment">// Freq da onda triangular em Hz</span></span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> taxa = (<span class="hljs-number">255.0</span>*<span class="hljs-number">2.0</span>*freq)/<span class="hljs-number">1000.0</span>;     <span class="hljs-comment">// taxa de subida/descida da onda triangular (valor %PWM/ms)</span>
<span class="hljs-comment">// Exemplo: Se freq = 0,1 Hz, T=1/01=10 segundos</span>
<span class="hljs-comment">// metada do ciclo da triangular T/2 = 5 segundos = 5000 ms</span>
<span class="hljs-comment">// taxa = 255.0/5000.0 = 0.051;                 // onda triangular deve atingir 100% duty-cycle (255) em 5 seg (5000 ms)</span>
<span class="hljs-comment">// para uso posterior em equação como:</span>
<span class="hljs-comment">// new_y = last_y + taxa*delta_t*dir</span>
<span class="hljs-comment">// dir=+1,-1 para indicar subida ou descida da onda triangular</span>
<span class="hljs-comment">// delta_t = passagem de tempo entre um ponto e outro da onda gerada (valor em ms)</span>

<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> converte_duty2volts = <span class="hljs-number">5.0</span>/<span class="hljs-number">256.0</span>;    <span class="hljs-comment">// para converter duty-cycle 100% = 255</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> converte_AD2volts = <span class="hljs-number">5.0</span>/<span class="hljs-number">1024.0</span>;     <span class="hljs-comment">// para converter de 2^10 (1024) = 5 Volts</span>

<span class="hljs-keyword">float</span> analog_value;                       <span class="hljs-comment">// Valor original do AD (int) convertido para tensão em Volts</span>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> currentMillis = <span class="hljs-number">0</span>;          <span class="hljs-comment">// "tempo" atual do sistema, t[k]</span>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> previousMillis = <span class="hljs-number">0</span>;         <span class="hljs-comment">// "tempo" na amostra anterior, t[k-1]</span>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> time_pressed = <span class="hljs-number">0</span>;           <span class="hljs-comment">// will store last time buttom was pressed</span>
<span class="hljs-keyword">bool</span> debouncing = <span class="hljs-keyword">false</span>;                  <span class="hljs-comment">// realizando debouncig ou não (habilita/desabilita leiutura chave)</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> time_debounce = <span class="hljs-number">150</span>;  <span class="hljs-comment">// periodo de tempo para debouncing de chave (milisegundos)</span>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> delta_t;                    <span class="hljs-comment">// diferença de passagem de tempo</span>
<span class="hljs-keyword">bool</span> pause = <span class="hljs-keyword">false</span>;                       <span class="hljs-comment">// pausar ou não onda triangular</span>
<span class="hljs-keyword">bool</span> stop = <span class="hljs-keyword">false</span>;                        <span class="hljs-comment">// parar onda trinagular (e zerar saída analógica/PWM)</span>
<span class="hljs-keyword">float</span> new_y;                              <span class="hljs-comment">// novo valor (valor atual) amplitude onda triangular, y[k] (entre 0 à 255)</span>
<span class="hljs-keyword">float</span> last_y;                             <span class="hljs-comment">// valor amostra passada da amplitude da trinagular, y[k-1]</span>
<span class="hljs-keyword">int</span> dir = <span class="hljs-number">1</span>;                              <span class="hljs-comment">// indica "subida"(+1) ou descida (-1) da onda triangular</span>
<span class="hljs-keyword">float</span> y_volts;                            <span class="hljs-comment">// valor convertido para tensão (0 ~ 5 Volts)</span>
<span class="hljs-keyword">bool</span> serial_out = <span class="hljs-keyword">true</span>;                   <span class="hljs-comment">// indica quando "imprimir" ou não info na porta serial</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">prepara_onda_triangular</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// prepara variáveis para iniciar onda do zero</span>
  dir = <span class="hljs-number">1</span>; <span class="hljs-comment">// onda subindo</span>
  last_y = <span class="hljs-number">0</span>;
  new_y = <span class="hljs-number">0</span>;
  delta_t = <span class="hljs-number">0</span>;
  currentMillis = millis();
  previousMillis = currentMillis;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update_led_status</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// sinaliza "status" do sistema</span>
  <span class="hljs-keyword">if</span> (pause)  {
    digitalWrite(pino_led_satus, LOW);
    Serial.println(<span class="hljs-string">"pause:"</span>);
    serial_out = <span class="hljs-keyword">false</span>;
  }
  <span class="hljs-keyword">if</span> (!pause) {
    digitalWrite(pino_led_satus, HIGH);
    serial_out = <span class="hljs-keyword">true</span>;
  } 
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update_triangular</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// calcula próximo valor da onda triangular, atualiza amostra passada</span>
  delta_t = currentMillis - previousMillis; <span class="hljs-comment">// calcula intervalo de tempo em comparação com amostra (ou pausa) anterior</span>
  new_y = last_y + taxa*delta_t*dir;
  <span class="hljs-keyword">if</span> (new_y&gt;<span class="hljs-number">255</span>)  {
    <span class="hljs-comment">// momento de inverter ciclo da triangular, de subida para descida</span>
    dir = -<span class="hljs-number">1</span>;
    new_y = <span class="hljs-number">255</span>;
  }
  <span class="hljs-keyword">if</span> (new_y&lt;<span class="hljs-number">0</span>)  {
    <span class="hljs-comment">// momento de inverter ciclo da triangular, de descida para subida</span>
    dir = +<span class="hljs-number">1</span>;
    new_y = <span class="hljs-number">0</span>;
  }
  <span class="hljs-comment">// joga valor calculado para "fora"</span>
  analogWrite(pino_PWM, new_y);
  last_y = new_y;                       <span class="hljs-comment">// deixa preparado para próximo ponto</span>
  previousMillis = currentMillis;       <span class="hljs-comment">// deixa pronto para cálculo do próximo ponto</span>
  y_volts = new_y*converte_duty2volts; <span class="hljs-comment">// converte ssaída duty-cycle para Volts (atualiza valor)</span>
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// put your setup code here, to run once:</span>
  pinMode(pino_button, INPUT);
  pinMode(pino_PWM, OUTPUT);
  pinMode(pino_led_satus, OUTPUT);
  digitalWrite(pino_led_satus, HIGH);
  Serial.begin(<span class="hljs-number">9600</span>);
  delay(<span class="hljs-number">50</span>);
  Serial.println(<span class="hljs-string">"Teste do Serial Plotter"</span>);
  Serial.print(<span class="hljs-string">"               freq="</span>); Serial.println(freq);
  Serial.print(<span class="hljs-string">"               taxa="</span>); Serial.println(taxa*<span class="hljs-number">1000</span>);
  Serial.print(<span class="hljs-string">"converte_duty2volts="</span>); Serial.println(converte_duty2volts*<span class="hljs-number">1000</span>);
  Serial.print(<span class="hljs-string">"  converte_AD2volts="</span>); Serial.println(converte_AD2volts*<span class="hljs-number">1000</span>);
  debouncing = <span class="hljs-keyword">false</span>;
  pause = <span class="hljs-keyword">true</span>;
  stop = <span class="hljs-keyword">false</span>;
  prepara_onda_triangular();
  update_triangular();
  digitalWrite(pino_led_satus, LOW);
  update_led_status();
  serial_out = <span class="hljs-keyword">false</span>;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// put your main code here, to run repeatedly:</span>
  currentMillis = millis();
  <span class="hljs-keyword">if</span> (!debouncing) {
    <span class="hljs-keyword">if</span> (digitalRead(pino_button) == LOW) {
      <span class="hljs-comment">// deveria deixar passar uns 50 ~ 150 ms a titulo de debouncing do botão</span>
      <span class="hljs-comment">// não podemos usar delay(100) porque influencia função analogWrite() - gerador PWM "interno" do Arduino</span>
      debouncing = <span class="hljs-keyword">true</span>;
      time_pressed = millis();
      <span class="hljs-comment">// antes de atualizar pause, verifica se onda triangular está sendo re-iniciada</span>
      <span class="hljs-comment">// pause --&gt; !pause; deve então garantir delta_t = 0</span>
      <span class="hljs-keyword">if</span> (pause){
        previousMillis = currentMillis;  
      }
      <span class="hljs-comment">// atualiza pause</span>
      pause = !pause;  <span class="hljs-comment">// simplesmente alterna estado</span>
      update_led_status();
    }
  }
  <span class="hljs-keyword">if</span> (debouncing) {
    <span class="hljs-comment">// Significa que estamos dentro de periodo de debouncing em que a chave é ignorada</span>
    <span class="hljs-comment">// falta verificar se passou tempo para "desligar" o debouncing</span>
    <span class="hljs-keyword">if</span> (currentMillis - time_pressed &gt;= time_debounce) {
      debouncing = <span class="hljs-keyword">false</span>;  <span class="hljs-comment">// habilita novas leituras do botão</span>
    }
  }
  <span class="hljs-keyword">if</span> (!pause) update_triangular(); 
  <span class="hljs-comment">// lendo sinal analógico</span>
  analog_value = converte_AD2volts*(<span class="hljs-keyword">float</span>)analogRead(analog_pin);
  <span class="hljs-comment">// if (serial_out){ // &lt;-- imprime apenas fora do pause</span>
    Serial.print(<span class="hljs-string">"y_max:"</span>); Serial.print(<span class="hljs-number">5.5</span>); <span class="hljs-comment">// apenas "traço superior"</span>
    Serial.print(<span class="hljs-string">"\t"</span>);
    <span class="hljs-keyword">if</span> (pause){
      Serial.print(<span class="hljs-string">" P "</span>);
    }
    Serial.print(<span class="hljs-string">"\t"</span>);
    Serial.print(<span class="hljs-string">"delta_t:"</span>); Serial.print(delta_t/<span class="hljs-number">10.0</span>);
    Serial.print(<span class="hljs-string">"\t"</span>);
    Serial.print(<span class="hljs-string">"yd:"</span>); Serial.print(y_volts);
    Serial.print(<span class="hljs-string">"\t"</span>);
    Serial.print(<span class="hljs-string">"y:"</span>); Serial.print(analog_value);
    Serial.print(<span class="hljs-string">"\t"</span>);
    Serial.print(<span class="hljs-string">"y_min:"</span>); Serial.println(-<span class="hljs-number">0.5</span>); <span class="hljs-comment">// apenas "traço inferior"</span>
  <span class="hljs-comment">// }</span>
}
</code></pre><p>Saída no Monitor Serial:</p><pre><code class="console" data-origin="<pre><code class=&quot;console&quot;>21:20:42.656 -&amp;gt;                freq=0.10
21:20:42.689 -&amp;gt;                taxa=51.00
21:20:42.722 -&amp;gt; converte_duty2volts=19.53
21:20:42.754 -&amp;gt;   converte_AD2volts=4.88
21:20:42.787 -&amp;gt; pause:
21:20:42.787 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:42.853 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:42.886 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:42.951 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:43.016 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:43.082 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50

21:20:45.933 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:45.998 -&amp;gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:46.031 -&amp;gt; y_max:5.50        delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:46.096 -&amp;gt; y_max:5.50        delta_t:5.40    yd:0.05    y:0.00    y_min:-0.50
21:20:46.162 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.11    y:0.05    y_min:-0.50
21:20:46.195 -&amp;gt; y_max:5.50        delta_t:5.60    yd:0.16    y:0.10    y_min:-0.50
21:20:46.260 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.22    y:0.17    y_min:-0.50
21:20:46.327 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.27    y:0.24    y_min:-0.50

21:20:48.915 -&amp;gt; y_max:5.50        delta_t:5.50    yd:2.85    y:2.75    y_min:-0.50
21:20:48.980 -&amp;gt; y_max:5.50        delta_t:5.40    yd:2.91    y:2.71    y_min:-0.50
21:20:49.013 -&amp;gt; pause:
21:20:49.013 -&amp;gt; y_max:5.50     P     delta_t:5.40    yd:2.91    y:2.80    y_min:-0.50
21:20:49.078 -&amp;gt; y_max:5.50     P     delta_t:5.40    yd:2.91    y:2.90    y_min:-0.50

21:20:58.720 -&amp;gt; y_max:5.50        delta_t:0.00    yd:4.83    y:4.84    y_min:-0.50
21:20:58.752 -&amp;gt; y_max:5.50        delta_t:5.50    yd:4.88    y:4.82    y_min:-0.50
21:20:58.818 -&amp;gt; y_max:5.50        delta_t:5.40    yd:4.94    y:4.88    y_min:-0.50
21:20:58.883 -&amp;gt; y_max:5.50        delta_t:5.60    yd:4.98    y:4.93    y_min:-0.50     &amp;lt;-- pico máximo
21:20:58.949 -&amp;gt; y_max:5.50        delta_t:5.50    yd:4.93    y:4.99    y_min:-0.50
21:20:58.982 -&amp;gt; y_max:5.50        delta_t:5.50    yd:4.87    y:4.94    y_min:-0.50
21:20:59.046 -&amp;gt; y_max:5.50        delta_t:5.60    yd:4.82    y:4.87    y_min:-0.50
21:20:59.113 -&amp;gt; y_max:5.50        delta_t:5.50    yd:4.76    y:4.80    y_min:-0.50
21:20:59.146 -&amp;gt; y_max:5.50        delta_t:5.40    yd:4.71    y:4.73    y_min:-0.50
21:20:59.211 -&amp;gt; y_max:5.50        delta_t:5.50    yd:4.65    y:4.73    y_min:-0.50

21:21:24.449 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.15    y:0.19    y_min:-0.50
21:21:24.488 -&amp;gt; y_max:5.50        delta_t:5.60    yd:0.09    y:0.15    y_min:-0.50
21:21:24.548 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.04    y:0.09    y_min:-0.50
21:21:24.614 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.00    y:0.03    y_min:-0.50
21:21:24.646 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.05    y:0.00    y_min:-0.50     &amp;lt;-- pico mínimo
21:21:24.711 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.11    y:0.04    y_min:-0.50
21:21:24.776 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.16    y:0.10    y_min:-0.50
21:21:24.810 -&amp;gt; y_max:5.50        delta_t:5.50    yd:0.22    y:0.17    y_min:-0.50
21:21:24.875 -&amp;gt; y_max:5.50        delta_t:5.60    yd:0.27    y:0.23    y_min:-0.50
</code></pre>">21:20:42.656 -&gt;                freq=0.10
21:20:42.689 -&gt;                taxa=51.00
21:20:42.722 -&gt; converte_duty2volts=19.53
21:20:42.754 -&gt;   converte_AD2volts=4.88
21:20:42.787 -&gt; pause:
21:20:42.787 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:42.853 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:42.886 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:42.951 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:43.016 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:43.082 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50

21:20:45.933 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:45.998 -&gt; y_max:5.50     P     delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:46.031 -&gt; y_max:5.50        delta_t:0.00    yd:0.00    y:0.00    y_min:-0.50
21:20:46.096 -&gt; y_max:5.50        delta_t:5.40    yd:0.05    y:0.00    y_min:-0.50
21:20:46.162 -&gt; y_max:5.50        delta_t:5.50    yd:0.11    y:0.05    y_min:-0.50
21:20:46.195 -&gt; y_max:5.50        delta_t:5.60    yd:0.16    y:0.10    y_min:-0.50
21:20:46.260 -&gt; y_max:5.50        delta_t:5.50    yd:0.22    y:0.17    y_min:-0.50
21:20:46.327 -&gt; y_max:5.50        delta_t:5.50    yd:0.27    y:0.24    y_min:-0.50

21:20:48.915 -&gt; y_max:5.50        delta_t:5.50    yd:2.85    y:2.75    y_min:-0.50
21:20:48.980 -&gt; y_max:5.50        delta_t:5.40    yd:2.91    y:2.71    y_min:-0.50
21:20:49.013 -&gt; pause:
21:20:49.013 -&gt; y_max:5.50     P     delta_t:5.40    yd:2.91    y:2.80    y_min:-0.50
21:20:49.078 -&gt; y_max:5.50     P     delta_t:5.40    yd:2.91    y:2.90    y_min:-0.50

21:20:58.720 -&gt; y_max:5.50        delta_t:0.00    yd:4.83    y:4.84    y_min:-0.50
21:20:58.752 -&gt; y_max:5.50        delta_t:5.50    yd:4.88    y:4.82    y_min:-0.50
21:20:58.818 -&gt; y_max:5.50        delta_t:5.40    yd:4.94    y:4.88    y_min:-0.50
21:20:58.883 -&gt; y_max:5.50        delta_t:5.60    yd:4.98    y:4.93    y_min:-0.50     &lt;-- pico máximo
21:20:58.949 -&gt; y_max:5.50        delta_t:5.50    yd:4.93    y:4.99    y_min:-0.50
21:20:58.982 -&gt; y_max:5.50        delta_t:5.50    yd:4.87    y:4.94    y_min:-0.50
21:20:59.046 -&gt; y_max:5.50        delta_t:5.60    yd:4.82    y:4.87    y_min:-0.50
21:20:59.113 -&gt; y_max:5.50        delta_t:5.50    yd:4.76    y:4.80    y_min:-0.50
21:20:59.146 -&gt; y_max:5.50        delta_t:5.40    yd:4.71    y:4.73    y_min:-0.50
21:20:59.211 -&gt; y_max:5.50        delta_t:5.50    yd:4.65    y:4.73    y_min:-0.50

21:21:24.449 -&gt; y_max:5.50        delta_t:5.50    yd:0.15    y:0.19    y_min:-0.50
21:21:24.488 -&gt; y_max:5.50        delta_t:5.60    yd:0.09    y:0.15    y_min:-0.50
21:21:24.548 -&gt; y_max:5.50        delta_t:5.50    yd:0.04    y:0.09    y_min:-0.50
21:21:24.614 -&gt; y_max:5.50        delta_t:5.50    yd:0.00    y:0.03    y_min:-0.50
21:21:24.646 -&gt; y_max:5.50        delta_t:5.50    yd:0.05    y:0.00    y_min:-0.50     &lt;-- pico mínimo
21:21:24.711 -&gt; y_max:5.50        delta_t:5.50    yd:0.11    y:0.04    y_min:-0.50
21:21:24.776 -&gt; y_max:5.50        delta_t:5.50    yd:0.16    y:0.10    y_min:-0.50
21:21:24.810 -&gt; y_max:5.50        delta_t:5.50    yd:0.22    y:0.17    y_min:-0.50
21:21:24.875 -&gt; y_max:5.50        delta_t:5.60    yd:0.27    y:0.23    y_min:-0.50
</code></pre><p>Sinal gerado (IDE 2.x do Arduíno: Ferramentas &gt;&gt; <strong>Serial Plotter</strong>):</p><p><img src="figuras/onda_triangular.gif" alt="onda_triangular.gif"></p><p><strong>Observações</strong>:</p><ul>
<li>Um programa em Python ou outra interface gráfica (algum <em>script</em> para Matlab ou Octave) capaz de ler dados capturados via porta serial, seria super bem vindo. Para que o sinal de saída não fique “flutuando” e um período maior de aquisição seja visível na tela.</li></ul><hr class="section"><p>Fernando Passold, 17/11/2022, 19/11/2022.</p>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
